import{D as M}from"./DataTableToolbar-_JXd-XvI.js";import{D as F}from"./DataTableSpinner-gbBX5NvQ.js";import{D as U,a as N,u as V,b as W}from"./DeleteModal-ZdrKnvCi.js";import{_ as E,e as k,f as C,y as j,o as s,c as l,a as n,b as h,w as P,B as z,F as D,k as S,q as I,t as y,h as u,l as v,j as T,i as R,r as m,g as x,A as q}from"./app-_cjOT05D.js";import{P as K}from"./PageHeader-pdESKEfy.js";import{S as H}from"./SideDrawer-o0BZJHFv.js";import{U as Y}from"./UsersForm-nbVTqtZK.js";import{u as G}from"./ViewFunctions-QkJbCJLB.js";/* empty css            */import"./LoadingSpinner-HcJ2r_wK.js";const J={components:{DataTableToolbar:M,DataTableSpinner:F,DataTableEmptyState:U,DataTablePaginate:N},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},backupDownloadBtnEnabled:{type:Boolean,default:!1},taskRunBtnEnabled:{type:Boolean,default:!1},editBtnEnabled:{type:Boolean,default:!0},rowViewBtnEnabled:{type:Boolean,default:!1}},emits:["openDrawer","deleteRow","pagechanged","showTaskRunConfirmModal","actionLink","viewAction"],setup(c,{emit:t}){const a=k({pageParams:{page:1,per_page:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),e=k({critical:"fas fa-exclamation-circle pf-u-danger-color-100",error:"fas fa-exclamation-circle pf-u-danger-color-100",warn:"fa fa-exclamation-triangle pf-u-warning-color-100",info:"fas fa-fw fa-info-circle pf-u-info-color-100",default:"fas fa-fw fa-info-circle pf-u-info-color-100"}),p=C(a.sortIcon.base),f=C(0);R("create-notification");const{setupResizableTable:_}=V(),g=R("formatTime");j(()=>{c.tabledata.isLoading||_()});function b(d,B=!1){t("openDrawer",{id:d,isClone:B})}function w(d){t("deleteRow",d)}function o(){a.pageParams.filters="",t("pagechanged",a.pageParams)}function r(d){a.pageParams.filters=d,t("pagechanged",a.pageParams)}function i(d){a.pageParams.page=d.page,a.pageParams.per_page=d.per_page,t("pagechanged",a.pageParams)}function A(d,B){p.value=a.pageParams.sortOrder==="desc"?a.sortIcon.up:a.sortIcon.down,f.value=B,a.pageParams.sortby=d,a.pageParams.sortOrder=a.pageParams.sortOrder==="desc"?"asc":"desc",t("pagechanged",a.pageParams)}function O(d){t("showTaskRunConfirmModal",d)}function L(d){t("viewAction",d),close()}return{activityLogIconTable:e,addFilters:r,clearFilters:o,data:a,deleteRow:w,emitShowTaskRunConfirmModal:O,formatTime:g,isSorted:f,openDrawer:b,pageChanged:i,sortBy:A,sortIcon:p,viewAction:L}}},Q={class:"pf-c-drawer__content pf-m-no-background"},X={class:"pf-c-drawer__body pf-m-padding"},Z={class:"pf-c-card"},$={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},ee={role:"row",id:"headerRow"},ae={key:0},te=["onClick"],ne={class:"pf-c-table__button-content"},oe={class:"pf-c-table__text"},se={class:"pf-c-table__sort-indicator"},re=n("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1),le={key:1,role:"rowgroup"},ie=["data-label"],de={key:0},ce={key:1,class:"pf-c-label__content"},fe={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},me=["onClick"],pe=n("span",{class:"pf-c-button__icon pf-m-start"},[n("i",{class:"fas fa-edit","aria-hidden":"true"})],-1),_e=["onClick"],ue=n("span",{class:"pf-c-button__icon pf-m-start"},[n("i",{class:"fas fa-trash","aria-hidden":"true"})],-1);function ge(c,t,a,e,p,f){const _=m("data-table-toolbar"),g=m("data-table-spinner"),b=m("data-table-empty-state"),w=m("data-table-paginate");return s(),l("div",Q,[n("div",X,[n("div",Z,[h(_,{pagename:a.pagename,onSearchInput:t[0]||(t[0]=o=>e.addFilters(o)),onOpenDrawer:t[1]||(t[1]=o=>e.openDrawer(o)),newBtnEnabled:a.newBtnEnabled,searchInputDisabled:a.searchInputDisabled},{customButtons:P(()=>[z(c.$slots,"customButtons")]),_:3},8,["pagename","newBtnEnabled","searchInputDisabled"]),n("table",$,[n("thead",null,[n("tr",ee,[(s(!0),l(D,null,S(a.tabledata.headers,(o,r)=>(s(),l("th",{key:o.name,class:I(["pf-m-truncate pf-c-table__sort pf-c-table__icon",e.isSorted===r?"pf-m-selected":""])},[o.sortable?u("",!0):(s(),l("span",ae,y(o.label),1)),o.sortable?(s(),l("button",{key:1,class:"pf-c-table__button",onClick:i=>e.sortBy(o.key,r)},[n("div",ne,[n("span",oe,y(o.label),1),n("span",se,[n("i",{class:I(e.isSorted===r?e.sortIcon:e.data.sortIcon.base)},null,2)])])],8,te)):u("",!0)],2))),128)),re])]),a.tabledata.isLoading?(s(),v(g,{key:0})):u("",!0),a.tabledata.data.total>0||a.tabledata.isLoading?(s(),l("tbody",le,[(s(!0),l(D,null,S(a.tabledata.data.data,o=>(s(),l("tr",{role:"row",key:o.name},[(s(!0),l(D,null,S(a.tabledata.headers,r=>(s(),l("td",{key:r.label,role:"cell","data-label":r.label},[r.key==="created_at"?(s(),l("div",de,y(e.formatTime(o[r.key])),1)):(s(),l("span",ce,y(o[r.key]),1))],8,ie))),128)),n("td",fe,[n("div",null,[a.editBtnEnabled?(s(),l("button",{key:0,class:"pf-c-button pf-m-link pf-m-small",type:"button",onClick:r=>e.openDrawer(o.id),alt:"Edit",title:"Edit"},[pe,T(" Edit ")],8,me)):u("",!0),n("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:r=>e.deleteRow(o.id),alt:"Delete",title:"Delete"},[ue,T(" Delete ")],8,_e)])])]))),128))])):a.tabledata.isLoading?u("",!0):(s(),v(b,{key:2,onClear:e.clearFilters},null,8,["onClear"]))]),h(w,{from:a.tabledata.data.from,to:a.tabledata.data.to,total:a.tabledata.data.total,current_page:a.tabledata.data.current_page,last_page:a.tabledata.data.last_page,onPagechanged:t[2]||(t[2]=o=>e.pageChanged(o))},null,8,["from","to","total","current_page","last_page"])])])])}const be=E(J,[["render",ge]]),we={props:{},setup(c){const t=C(0),a=C(!0);x(()=>{if(localStorage.getItem("hideAdminWarningBanner")){t.value=1,a.value=!1;return}e()});function e(){axios.get("/api/users?page=1&perPage=10&filter=admin@domain.com&sortCol=&sortOrd=desc").then(f=>{f.data.data.length>0?t.value=0:t.value=1,a.value=!1})}function p(){localStorage.setItem("hideAdminWarningBanner",!0),t.value=1}return{isLoading:a,warningStatus:t,hideAdminWarningBanner:p}}},he={key:0},ve={key:0,class:"pf-c-alert pf-m-warning pf-m-inline","aria-label":"Inline warning alert"},ye=n("div",{class:"pf-c-alert__icon"},[n("i",{class:"fas fa-fw fa-exclamation-triangle","aria-hidden":"true"})],-1),De=n("p",{class:"pf-c-alert__title"},[n("span",{class:"pf-screen-reader"},"Warning:"),T(" You have not removed the default admin user ")],-1),ke={class:"pf-c-alert__action"},Ce=n("i",{class:"fas fa-times","aria-hidden":"true"},null,-1),Be=[Ce];function Se(c,t,a,e,p,f){return e.isLoading?u("",!0):(s(),l("div",he,[e.warningStatus===0?(s(),l("div",ve,[ye,De,n("div",ke,[n("button",{onClick:t[0]||(t[0]=_=>e.hideAdminWarningBanner()),class:"pf-c-button pf-m-plain",type:"button","aria-label":"Close success alert: Success alert title"},Be)])])):u("",!0)]))}const Pe=E(we,[["render",Se]]),Ie={components:{UsersForm:Y,PageHeader:K,DataTableUsers:be,SideDrawer:H,DeleteModal:W,DefaultAdminUserWarningBanner:Pe},setup(){const c=k({editid:0,pagename:"Users",pagedesc:"rConfig system users",pagenamesingle:"User",modelName:"users",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{name:"",email:"",username:"",created_at:""}}),a=q().params.userId,{models:e,isLoading:p,dataTablePageChanged:f,openDrawer:_,closeDrawerState:g,deleteRow:b,formSubmitted:w,confirmDelete:o,destroyModel:r}=G(c,c.modelName,c.modelObject);x(()=>{f(c.pageOptionsState),a&&_({id:a})});const i=k({headers:[{key:"name",label:"Name",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"created_at",label:"Created",sortable:!1}],data:e,isLoading:p});return{viewstate:c,dataTablePageChanged:f,openDrawer:_,closeDrawerState:g,deleteRow:b,confirmDelete:o,table:i,destroyModel:r,formSubmitted:w}}},Te={class:"pf-c-page__main",tabindex:"-1"},Ee=n("div",{class:"pf-c-divider",role:"separator"},null,-1),Re={class:"pf-c-page__main-section pf-m-no-padding"},xe={class:"pf-c-drawer__main"},Ae=n("div",{class:"pf-l-flex__item"},"Please complete all fields",-1);function Oe(c,t,a,e,p,f){const _=m("default-admin-user-warning-banner"),g=m("page-header"),b=m("data-table-users"),w=m("users-form"),o=m("side-drawer"),r=m("delete-modal");return s(),l(D,null,[n("main",Te,[h(_),h(g,{pagename:e.viewstate.pagename,desc:e.viewstate.pagedesc},null,8,["pagename","desc"]),Ee,n("section",Re,[n("div",{class:I(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[n("div",xe,[h(b,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:t[0]||(t[0]=i=>e.dataTablePageChanged(i)),onOpenDrawer:t[1]||(t[1]=i=>e.openDrawer(i)),onDeleteRow:t[2]||(t[2]=i=>e.deleteRow(i))},null,8,["pagename","tabledata"]),(s(),v(o,{pagename:e.viewstate.pagenamesingle,drawerState:e.viewstate.openDrawerState,editid:e.viewstate.editid,onCloseDrawer:t[4]||(t[4]=i=>e.viewstate.openDrawerState=!1),key:e.viewstate.sideDrawerComponentKey},{subtext:P(()=>[Ae]),form:P(()=>[(s(),v(w,{viewstate:e.viewstate,onCloseDrawer:e.closeDrawerState,onFormsubmitted:t[3]||(t[3]=i=>e.formSubmitted(i)),key:e.viewstate.editid},null,8,["viewstate","onCloseDrawer"]))]),_:1},8,["pagename","drawerState","editid"]))])],2)])]),e.viewstate.showDeleteModal?(s(),v(r,{key:0,editid:e.viewstate.editid,onCloseModal:t[5]||(t[5]=i=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):u("",!0)],64)}const Ke=E(Ie,[["render",Oe]]);export{Ke as default};
