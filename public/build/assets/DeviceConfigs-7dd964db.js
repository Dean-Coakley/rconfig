import{D as K}from"./DataTableToolbar-8dad84f3.js";import{D as G}from"./DataTableSpinner-65e30ce1.js";import{D as H,a as J,u as Q,b as U}from"./DeleteModal-324e12b3.js";import{_ as N,A as z,H as W,i as F,e as P,f as D,g as L,r as v,o as l,c,a as t,p as E,t as k,F as B,k as R,j,h as y,b as h,w as C,q as b,s as X,x as Y,y as Z,G as $,l as T}from"./app-8906d496.js";import{D as ee}from"./DevicesBreadcrumbs-c820a746.js";import{L as te}from"./LoadingSpinner-a0d214b0.js";import{P as ae}from"./PageHeader-cfb6d86c.js";import{u as oe,a as ne}from"./ViewFunctions-bfcb00a7.js";/* empty css            */const se={props:{},emits:["filterTable"],setup(f,{emit:o}){const a=z();W();const e=F("create-notification"),w=a.params.id,_=a.query.devicename,r=P({}),d=a.query.status?a.query.status:"all",p=D(!1),g=D("");L(()=>{u()});function u(){axios.get("/api/configs/distinct-commands/"+w).then(m=>{Object.assign(r,m.data.data)}).catch(m=>{e({type:"danger",title:"Error",message:m.response})})}function x(m){g.value=m,p.value=!1,o("filterTable",m)}function n(){p.value=!p.value}function s(){g.value="",p.value=!1,o("filterTable","")}return{deviceid:w,devicename:_,distinctCommands:r,showSelect:p,toggleSelect:n,filterCommandSelected:g,activeStatus:d,filterOnCommand:x,clearFilter:s}}},M=f=>(X("data-v-d2fa9ff6"),f=f(),Y(),f),le=M(()=>t("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),ie={class:"pf-c-toolbar__group pf-m-filter-group"},ce={class:"pf-c-toolbar__item"},de={class:"pf-c-select"},re={class:"pf-c-select__toggle-wrapper"},fe=["textContent"],_e=M(()=>t("span",{class:"pf-c-select__toggle-arrow"},[t("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1)),ue={key:0,class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox"},pe=["onClick"],me={key:0,class:"pf-c-select__menu-item-icon"},ge=M(()=>t("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)),be=[ge],ve=M(()=>t("i",{class:"fas fa-times-circle","aria-hidden":"true"},null,-1)),he=[ve],we=M(()=>t("hr",{class:"pf-c-divider pf-m-vertical"},null,-1)),ye={class:"pf-c-toolbar__group pf-m-icon-button-group"},ke={class:"pf-c-toolbar__item"},De={class:"pf-c-toolbar__item"},Ce={class:"pf-c-toolbar__item"},Se={class:"pf-c-toolbar__item"};function xe(f,o,a,e,w,_){const r=v("router-link");return l(),c(B,null,[le,t("div",ie,[t("div",ce,[t("div",de,[t("button",{class:"pf-c-select__toggle",type:"button","aria-haspopup":"true","aria-expanded":"false",onClick:o[0]||(o[0]=E((...d)=>e.toggleSelect&&e.toggleSelect(...d),["prevent"]))},[t("div",re,[t("span",{class:"pf-c-select__toggle-text",textContent:k(e.filterCommandSelected?e.filterCommandSelected:"Filter command")},null,8,fe)]),_e]),e.showSelect||""?(l(),c("ul",ue,[(l(!0),c(B,null,R(e.distinctCommands,d=>(l(),c("li",{role:"presentation",key:d},[t("button",{class:"pf-c-select__menu-item",role:"option",onClick:E(p=>e.filterOnCommand(d.command),["prevent"])},[j(k(d.command)+" ",1),d.command===e.filterCommandSelected?(l(),c("span",me,be)):y("",!0)],8,pe)]))),128))])):y("",!0)])]),t("button",{class:"pf-c-button pf-m-plain pf-c-select__toggle-clear",type:"button","aria-label":"Clear all",onClick:o[1]||(o[1]=E(d=>e.clearFilter(),["prevent"]))},he)]),we,t("div",ye,[t("div",ke,[h(r,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:"all"}}},{default:C(()=>[t("i",{class:b(["fas fa-expand-arrows-alt",e.activeStatus=="all"?"statusActive":"statusInactive"]),alt:"Show all configs",title:"Show all configs"},null,2)]),_:1},8,["to"])]),t("div",De,[h(r,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:1}}},{default:C(()=>[t("i",{class:b(["fa fa-check-circle pf-u-success-color-100",e.activeStatus=="1"?"statusActive":"statusInactive"]),alt:"Show configs with completed status",title:"Show configs with completed status"},null,2)]),_:1},8,["to"])]),t("div",Ce,[h(r,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:2}}},{default:C(()=>[t("i",{class:b(["fa fa-exclamation-triangle pf-u-warning-color-100",e.activeStatus=="2"?"statusActive":"statusInactive"]),alt:"Show configs with unknown status",title:"Show configs with unknown status"},null,2)]),_:1},8,["to"])]),t("div",Se,[h(r,{type:"button",class:"pf-c-button pf-m-plain",to:{path:"/device/view/configs/"+e.deviceid,query:{id:e.deviceid,devicename:e.devicename,status:0}}},{default:C(()=>[t("i",{class:b(["fa fa-exclamation-circle pf-u-danger-color-100",e.activeStatus=="0"?"statusActive":"statusInactive"]),alt:"Show configs with failed status",title:"Show configs with failed status"},null,2)]),_:1},8,["to"])])])],64)}const Be=N(se,[["render",xe],["__scopeId","data-v-d2fa9ff6"]]),Ie={components:{DataTableToolbar:K,DataTableSpinner:G,DataTableEmptyState:H,DataTablePaginate:J,ConfigsCustomToolbarActions:Be},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},editBtnEnabled:{type:Boolean,default:!0},rowsDeleteNotification:{type:Boolean,default:!1}},emits:["openDrawer","deleteRow","pagechanged","deleteManyRows","checkBoxesCleared"],setup(f,{emit:o}){const a=P({pageParams:{page:1,perpage:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),e=D(a.sortIcon.base),w=D(0),_=D([]),r=D(!1),{setupResizableTable:d}=Q(),p=F("formatTime");Z(()=>{f.rowsDeleteNotification===!0&&(_.value=[],f.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!1)}),o("checkBoxesCleared")),f.tabledata.isLoading||d()});function g(){r.value===!1?(_.value=[],f.tabledata.data.data.length>0&&f.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!0,_.value.push(i.id))})):(f.tabledata.data.data.forEach(i=>{i.id&&(i.checked=!1)}),_.value=[]),r.value=!r.value}function u(i){const S=_.value.indexOf(i);S>-1?_.value.splice(S,1):_.value.push(i)}function x(i,S=!1){o("openDrawer",{id:i,isClone:S})}function n(i){o("deleteRow",i)}function s(){o("deleteManyRows",_)}function m(){a.pageParams.filters="",o("pagechanged",a.pageParams)}function q(i){a.pageParams.filters=i,o("pagechanged",a.pageParams)}function I(i){a.pageParams.page=i.page,a.pageParams.per_page=i.per_page,o("pagechanged",a.pageParams)}function O(i,S){e.value=a.pageParams.sortOrder==="desc"?a.sortIcon.up:a.sortIcon.down,w.value=S,a.pageParams.sortby=i,a.pageParams.sortOrder=a.pageParams.sortOrder==="desc"?"asc":"desc",o("pagechanged",a.pageParams)}function V(i){var S=["B","KB","MB","GB","TB"];if(i==0)return"0 Byte";var A=parseInt(Math.floor(Math.log(i)/Math.log(1024)));return Math.round(i/Math.pow(1024,A),2)+" "+S[A]}return{addFilters:q,allSelected:r,bytesToSize:V,checkedRows:_,clearFilters:m,data:a,deleteRow:n,deleteSelected:s,formatTime:p,isSorted:w,openDrawer:x,pageChanged:I,selectAllRows:g,selectRow:u,sortBy:O,sortIcon:e}}},Re={class:"pf-c-drawer__content pf-m-no-background"},Me={class:"pf-c-drawer__body pf-m-padding"},Te={class:"pf-c-card"},Pe={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},Oe={role:"row"},Ee={class:"pf-c-table__check",role:"cell",id:"headerRow"},Ne={key:0},Fe=["onClick"],qe={class:"pf-c-table__button-content"},Ae={class:"pf-c-table__text"},ze={class:"pf-c-table__sort-indicator"},Le=t("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1),je={key:1,role:"rowgroup"},Ve={class:"pf-c-table__check",role:"cell"},Ke=["onClick","checked"],Ge=["data-label"],He={key:0},Je={key:1},Qe={key:3},Ue={key:1},We={key:3},Xe={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},Ye=t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-search","aria-hidden":"true"})],-1),Ze=["onClick"],$e=t("span",{class:"pf-c-button__icon pf-m-start"},[t("i",{class:"fas fa-trash","aria-hidden":"true"})],-1),et=[$e];function tt(f,o,a,e,w,_){const r=v("configs-custom-toolbar-actions"),d=v("data-table-toolbar"),p=v("data-table-spinner"),g=v("router-link"),u=v("data-table-empty-state"),x=v("data-table-paginate");return l(),c("div",Re,[t("div",Me,[t("div",Te,[h(d,{pagename:a.pagename,onSearchInput:o[2]||(o[2]=n=>e.addFilters(n)),onOpenDrawer:o[3]||(o[3]=n=>e.openDrawer(n)),newBtnEnabled:a.newBtnEnabled,searchInputDisabled:a.searchInputDisabled},$({customActions:C(()=>[h(r,{onFilterTable:o[0]||(o[0]=n=>e.addFilters(n))})]),_:2},[e.checkedRows.length>0?{name:"customButtons",fn:C(()=>[t("button",{class:"pf-c-button pf-m-danger",type:"button",onClick:o[1]||(o[1]=n=>e.deleteSelected())},"Delete selected")]),key:"0"}:void 0]),1032,["pagename","newBtnEnabled","searchInputDisabled"]),t("table",Pe,[t("thead",null,[t("tr",Oe,[t("td",Ee,[t("label",null,[t("input",{type:"checkbox",onClick:o[4]||(o[4]=n=>e.selectAllRows())})])]),(l(!0),c(B,null,R(a.tabledata.headers,(n,s)=>(l(),c("th",{key:n.name,class:b(["pf-c-table__sort pf-c-table__icon",[e.isSorted===s?"pf-m-selected":"",n.hideOnSmall?"pf-m-hidden pf-m-visible-on-xl":""]])},[n.sortable?y("",!0):(l(),c("span",Ne,k(n.label),1)),n.sortable?(l(),c("button",{key:1,class:"pf-c-table__button",onClick:m=>e.sortBy(n.key,s)},[t("div",qe,[t("span",Ae,k(n.label),1),t("span",ze,[t("i",{class:b(e.isSorted===s?e.sortIcon:e.data.sortIcon.base)},null,2)])])],8,Fe)):y("",!0)],2))),128)),Le])]),a.tabledata.isLoading?(l(),T(p,{key:0})):y("",!0),a.tabledata.data.total>0||a.tabledata.isLoading?(l(),c("tbody",je,[(l(!0),c(B,null,R(a.tabledata.data.data,n=>(l(),c("tr",{role:"row",key:n.name},[t("td",Ve,[t("label",null,[t("input",{type:"checkbox",onClick:s=>e.selectRow(n.id),checked:n.checked},null,8,Ke)])]),(l(!0),c(B,null,R(a.tabledata.headers,s=>(l(),c("td",{key:s.label,role:"cell","data-label":s.label,class:b([s.hideOnSmall?"pf-m-hidden pf-m-visible-on-xl":"","pf-m-truncate"])},[s.isRelationShip===!0?(l(),c("div",He,[(l(!0),c(B,null,R(n[s.key],m=>(l(),c("div",{key:m.id},k(m[s.relationshipKey]),1))),128))])):(l(),c("div",Je,[s.isStatusIcon?(l(),c("i",{key:0,class:b(n[s.key]=="0"?"fa fa-exclamation-circle pf-u-danger-color-100":"")},null,2)):y("",!0),s.isStatusIcon?(l(),c("i",{key:1,class:b(n[s.key]=="1"?"fa fa-check-circle pf-u-success-color-100 ":"")},null,2)):y("",!0),s.isStatusIcon?(l(),c("i",{key:2,class:b(n[s.key]=="2"?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2)):(l(),c("span",Qe,[s.isLink?(l(),T(g,{key:0,class:"Card__link",to:"/device/view/"+n.id},{default:C(()=>[j(k(n[s.key]),1)]),_:2},1032,["to"])):y("",!0),s.key==="config_filesize"?(l(),c("span",Ue,k(e.bytesToSize(n[s.key])),1)):s.key==="created_at"?(l(),c("span",{key:2,class:b(n.config_downloaded===0?"pf-u-disabled-color-200":"")},k(e.formatTime(n[s.key])),3)):(l(),c("span",We,k(n[s.key]),1))]))]))],10,Ge))),128)),t("td",Xe,[t("div",null,[h(g,{type:"button",class:"pf-c-button pf-m-link",to:"/device/view/configs/view-config/"+n.id},{default:C(()=>[Ye]),_:2},1032,["to"]),t("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:s=>e.deleteRow(n.id),alt:"Delete",title:"Delete"},et,8,Ze)])])]))),128))])):a.tabledata.isLoading?y("",!0):(l(),T(u,{key:2,onClear:e.clearFilters},null,8,["onClear"]))]),h(x,{from:a.tabledata.data.from,to:a.tabledata.data.to,total:a.tabledata.data.total,current_page:a.tabledata.data.current_page,last_page:a.tabledata.data.last_page,onPagechanged:o[5]||(o[5]=n=>e.pageChanged(n))},null,8,["from","to","total","current_page","last_page"])])])])}const at=N(Ie,[["render",tt]]),ot={props:{},components:{DataTableConfigs:at,DeleteModal:U,DevicesBreadcrumbs:ee,LoadingSpinner:te,PageHeader:ae},setup(f){const o=D("Device Configurations");D("Device configurations for this device");const a=z(),e=a.query.id,w=a.query.devicename,_=a.query.status?a.query.status:"all";F("create-notification");const r=D(!1),d=P({editid:0,pagename:"Device Configurations",pagedesc:"rConfig system activity log",pagenamesingle:"Device Configuration",modelName:"configs/all-by-deviceid/"+e+"/"+_,openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{download_status:"",command:"",config_filename:"",config_filesize:"",created_at:""}}),{models:p,isLoading:g,deleteRow:u,deleteManyRows:x,dataTablePageChanged:n}=oe(d,d.modelName,d.modelObject),{destroyModel:s}=ne("configs",d.modelObject);L(()=>{n(d.pageOptionsState)});const m=P({headers:[{key:"download_status",label:"Status",sortable:!0,isStatusIcon:!0},{key:"device_name",label:"Device Name",sortable:!0},{key:"command",label:"Command",sortable:!1},{key:"config_filename",label:"Filename",sortable:!1},{key:"config_filesize",label:"Filesize",sortable:!1},{key:"created_at",label:"Downloaded",sortable:!0}],data:p,isLoading:g});return{confirmDelete:async I=>{d.showDeleteModal=!1,typeof I=="number"&&await s(I,d.pagenamesingle),I.length>1&&await I.forEach(O=>{s(O,d.pagenamesingle)}),n(d.pageOptionsState),r.value=!0},rowsDeleteNotification:r,dataTablePageChanged:n,deleteRow:u,deleteManyRows:x,deviceid:e,devicename:w,pagename:o,table:m,viewstate:d}}},nt={class:"pf-c-page__main",tabindex:"-1"},st=t("div",{class:"pf-c-divider",role:"separator"},null,-1),lt={class:"pf-c-page__main-section pf-m-no-padding"},it={class:"pf-c-drawer__main"};function ct(f,o,a,e,w,_){const r=v("devices-breadcrumbs"),d=v("page-header"),p=v("data-table-configs"),g=v("delete-modal");return l(),c(B,null,[t("main",nt,[h(d,{pagename:e.pagename},{breadcrumbs:C(()=>[h(r,{devicename:e.devicename,deviceId:e.deviceid},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),st,t("section",lt,[t("div",{class:b(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[t("div",it,[h(p,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:e.dataTablePageChanged,onOpenDrawer:o[0]||(o[0]=u=>f.openDrawer(u)),onDeleteRow:o[1]||(o[1]=u=>e.deleteRow(u)),onDeleteManyRows:o[2]||(o[2]=u=>e.deleteManyRows(u)),onCheckBoxesCleared:o[3]||(o[3]=u=>e.rowsDeleteNotification=!1),newBtnEnabled:!1,editBtnEnabled:!1,searchInputEnabled:!1,rowsDeleteNotification:e.rowsDeleteNotification},null,8,["pagename","tabledata","onPagechanged","rowsDeleteNotification"])])],2)])]),e.viewstate.showDeleteModal?(l(),T(g,{key:0,editid:e.viewstate.editid,onCloseModal:o[4]||(o[4]=u=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):y("",!0)],64)}const vt=N(ot,[["render",ct]]);export{vt as default};
