import{a as T,u as P}from"./ViewFunctions-etaBusRy.js";import{P as L}from"./PageHeader-XFyXy75-.js";import{D as R}from"./DataTable-D5toa4h8.js";import{S as V}from"./SideDrawer-7j4m40x_.js";import{b as q}from"./DeleteModal-RtET0BWv.js";import{_ as M,f as b,g as k,o as n,c as g,b as D,a,n as h,v as y,t as C,h as w,p as F,F as N,r as c,e as S,q as j,l as u,w as x,A as B}from"./app-WFXKRrC4.js";import{L as K}from"./LoadingSpinner-ErrFA9cp.js";import"./DataTableToolbar-TlnwMVMJ.js";import"./DataTableSpinner-OKVj-L0h.js";/* empty css            */const U={props:{viewstate:{type:Object}},emits:["closeDrawer","formsubmitted"],components:{LoadingSpinner:K},setup(s,{emit:t}){const l=b(!1),e=b(s.viewstate.editid===0?"add":"edit"),{errors:m,model:d,clearModel:i,updateModel:o,getModel:p,storeModel:f,isLoading:_}=T(s.viewstate.modelName,s.viewstate.modelObject);k(()=>{p(s.viewstate.editid)});const r=async()=>{s.viewstate.editid!=0?await o(d):await f(d),m.value===""&&(t("formsubmitted",s.viewstate.pagenamesingle+" "+e.value+"ed!"),v())};function v(){t("closeDrawer")}return{showRoleOptions:l,close:v,errors:m,model:d,saveModels:r,clearModel:i,isLoading:_}}},z={key:0,novalidate:"",class:"pf-c-form"},A=["value"],E={class:"pf-c-form__group"},H=a("div",{class:"pf-c-form__group-label"},[a("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[a("span",{class:"pf-c-form__label-text"},"Tag Name"),a("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1),I={class:"pf-c-form__group-control"},J=["aria-invalid"],G={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},Q={class:"pf-c-form__group"},W=a("div",{class:"pf-c-form__group-label"},[a("label",{class:"pf-c-form__label",for:"form-demo-basic-name"},[a("span",{class:"pf-c-form__label-text"},"Description"),a("span",{class:"pf-c-form__label-required","aria-hidden":"true"},"*")])],-1),X={class:"pf-c-form__group-control"},Y=["aria-invalid"],Z={key:0,class:"pf-c-form__helper-text pf-m-error",id:"form-help-text-address-helper","aria-live":"polite"},$={class:"pf-c-form__group pf-m-action"},ee={class:"pf-c-form__group-control"},ae={class:"pf-c-form__actions"};function te(s,t,l,e,m,d){const i=c("loading-spinner");return n(),g(N,null,[D(i,{showSpinner:e.isLoading},null,8,["showSpinner"]),e.isLoading?w("",!0):(n(),g("form",z,[a("input",{id:"editid",name:"editid",type:"hidden",value:l.viewstate.editid},null,8,A),a("div",E,[H,a("div",I,[h(a("input",{class:"pf-c-form-control",required:"",type:"text",id:"tagname",name:"tagname","onUpdate:modelValue":t[0]||(t[0]=o=>e.model.tagname=o),"aria-invalid":!!e.errors.tagname,autocomplete:"off"},null,8,J),[[y,e.model.tagname]]),e.errors.tagname?(n(),g("p",G,C(e.errors.tagname[0]),1)):w("",!0)])]),a("div",Q,[W,a("div",X,[h(a("input",{class:"pf-c-form-control",required:"",type:"text",id:"tagDescription",name:"tagDescription","onUpdate:modelValue":t[1]||(t[1]=o=>e.model.tagDescription=o),"aria-invalid":!!e.errors.tagDescription,autocomplete:"off"},null,8,Y),[[y,e.model.tagDescription]]),e.errors.tagDescription?(n(),g("p",Z,C(e.errors.tagDescription[0]),1)):w("",!0)])]),a("div",$,[a("div",ee,[a("div",ae,[a("button",{class:"pf-c-button pf-m-primary",type:"submit",onClick:t[2]||(t[2]=F((...o)=>e.saveModels&&e.saveModels(...o),["prevent"]))},"Save"),a("button",{class:"pf-c-button pf-m-link",type:"button",onClick:t[3]||(t[3]=(...o)=>e.close&&e.close(...o))},"Cancel")])])])]))],64)}const oe=M(U,[["render",te]]),se={components:{TagsForm:oe,PageHeader:L,DataTable:R,SideDrawer:V,DeleteModal:q},setup(){const s=B(),t=b(s.path),l=b(s.params.id),e=S({editid:0,pagename:"Tags",pagedesc:"rConfig system tags",pagenamesingle:"Tag",modelName:"tags",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{tagname:"",tagDescription:""}}),{models:m,isLoading:d,dataTablePageChanged:i,openDrawer:o,closeDrawerState:p,deleteRow:f,formSubmitted:_,confirmDelete:r,destroyModel:v}=P(e,e.modelName,e.modelObject);k(()=>{t.value==="/tags/"+l.value&&(e.pageOptionsState.filters=JSON.stringify({tagName:l.value})),i(e.pageOptionsState)});const O=S({headers:[{key:"id",label:"ID",sortable:!0,error:"Can't be blank"},{key:"tagname",label:"Model Name",sortable:!0},{key:"tagDescription",label:"Description",sortable:!1},{key:"device_count",label:"Devices Count",sortable:!1,deviceCountType:"tag"}],data:m,isLoading:d});return{viewstate:e,dataTablePageChanged:i,openDrawer:o,closeDrawerState:p,deleteRow:f,confirmDelete:r,table:O,destroyModel:v,formSubmitted:_}}},re={class:"pf-c-page__main",tabindex:"-1"},ie=a("div",{class:"pf-c-divider",role:"separator"},null,-1),ne={class:"pf-c-page__main-section pf-m-no-padding"},le={class:"pf-c-drawer__main"},de=a("div",{class:"pf-l-flex__item"},"Please complete all fields",-1);function me(s,t,l,e,m,d){const i=c("page-header"),o=c("data-table"),p=c("tags-form"),f=c("side-drawer"),_=c("delete-modal");return n(),g(N,null,[a("main",re,[D(i,{pagename:e.viewstate.pagename,desc:e.viewstate.pagedesc},null,8,["pagename","desc"]),ie,a("section",ne,[a("div",{class:j(["pf-c-drawer",{"pf-m-expanded":e.viewstate.openDrawerState}])},[a("div",le,[D(o,{pagename:e.viewstate.pagenamesingle,tabledata:e.table,onPagechanged:e.dataTablePageChanged,onOpenDrawer:t[0]||(t[0]=r=>e.openDrawer(r)),onDeleteRow:t[1]||(t[1]=r=>e.deleteRow(r))},null,8,["pagename","tabledata","onPagechanged"]),(n(),u(f,{pagename:e.viewstate.pagenamesingle,drawerState:e.viewstate.openDrawerState,editid:e.viewstate.editid,onCloseDrawer:t[3]||(t[3]=r=>e.viewstate.openDrawerState=!1),key:e.viewstate.sideDrawerComponentKey},{subtext:x(()=>[de]),form:x(()=>[(n(),u(p,{viewstate:e.viewstate,onCloseDrawer:e.closeDrawerState,onFormsubmitted:t[2]||(t[2]=r=>e.formSubmitted(r)),key:e.viewstate.editid},null,8,["viewstate","onCloseDrawer"]))]),_:1},8,["pagename","drawerState","editid"]))])],2)])]),e.viewstate.showDeleteModal?(n(),u(_,{key:0,editid:e.viewstate.editid,onCloseModal:t[4]||(t[4]=r=>e.viewstate.showDeleteModal=!1),onConfirmDelete:e.confirmDelete},null,8,["editid","onConfirmDelete"])):w("",!0)],64)}const he=M(se,[["render",me]]);export{he as default};
