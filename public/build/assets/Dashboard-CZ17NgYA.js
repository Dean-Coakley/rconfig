import{_ as x,o as t,c as o,a as s,b as d,w as u,i as S,r as p,d as w,e as L,f as m,g as b,h as i,j as g,t as v,F as D,k as V,l as h}from"./app-4OF_fxgl.js";import{H as R}from"./HelpContent-BJ6Hi4vF.js";import{P as I}from"./PageHeader-DtL09NBF.js";import{D as P}from"./DeviceViewDeviceDetailsDescr-CFajq5VC.js";/* empty css            */import"./CopyLogo-DDcPpvDW.js";const E={props:{model:{type:Object,default:()=>({})}},components:{},setup(f,{emit:n}){const a=S("create-notification");function e(){axios.post("/api/device/purge-failed-configs",{device_id:"--all"}).then(_=>{a({type:"success",title:"Purge Successful",message:"Purge failed config files for all devices."})}).catch(_=>{a({type:"danger",title:"Error",message:_.response.data.message})})}return{purgeFailedConfigs:e}}},H={class:"pf-c-card"},N=s("div",{class:"pf-c-card__title"},[s("h2",{class:"pf-c-title pf-m-lg"},"Common Actions")],-1),O={class:"pf-c-menu"},M={class:"pf-c-menu__content"},F={class:"pf-c-menu__list"},j={class:"pf-c-menu__list-item"},A=s("span",{class:"pf-c-menu__item-main"},[s("span",{class:"pf-c-menu__item-icon"},[s("i",{class:"fas fa-plus-circle"})]),s("span",{class:"pf-c-menu__item-text"},"Create a new device")],-1),B=s("span",{class:"pf-c-menu__item-description"},"Setup a new devices in rConfig",-1),G={class:"pf-c-menu__list-item"},Q=s("span",{class:"pf-c-menu__item-main"},[s("span",{class:"pf-c-menu__item-icon"},[s("i",{class:"pficon pf-icon-storage-domain"})]),s("span",{class:"pf-c-menu__item-text"},"View Devices")],-1),T=s("span",{class:"pf-c-menu__item-description pf-u-text-break-word"},"View all devices",-1),z={class:"pf-c-menu__list-item"},U=s("span",{class:"pf-c-menu__item-main"},[s("span",{class:"pf-c-menu__item-icon"},[s("i",{class:"fas fa-search"})]),s("span",{class:"pf-c-menu__item-text"},"Search Configs")],-1),Y=s("span",{class:"pf-c-menu__item-description pf-u-text-break-word"},"Search multiple configuration files",-1),q={class:"pf-c-menu__list-item"},J=w('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-trash"></i></span><span class="pf-c-menu__item-text">Purge Failed Configs</span></span><span class="pf-c-menu__item-description pf-u-text-break-word">Purge all Failed Configs for all devices</span>',2),K=[J];function W(f,n,a,e,_,r){const c=p("router-link");return t(),o("div",null,[s("div",H,[N,s("div",O,[s("div",M,[s("ul",F,[s("li",j,[d(c,{to:"/devices",class:"pf-c-menu__item",type:"button"},{default:u(()=>[A,B]),_:1})]),s("li",G,[d(c,{to:"/devices",class:"pf-c-menu__item",type:"button"},{default:u(()=>[Q,T]),_:1})]),s("li",z,[d(c,{to:"/config-search",class:"pf-c-menu__item",type:"button"},{default:u(()=>[U,Y]),_:1})]),s("li",q,[s("button",{class:"pf-c-menu__item",onClick:n[0]||(n[0]=l=>e.purgeFailedConfigs())},K)])])])])])])}const X=x(E,[["render",W]]),Z={props:{},setup(f){const n=L({}),a=m(!1),e=m(!1);b(()=>{r()});function _(){console.log("refreshing config details..."),a.value=!0,r()}function r(){e.value=!0,axios.get("/api/dashboard/configinfo").then(c=>{Object.assign(n,c.data.data),a.value=!1,e.value=!1})}return{configinfos:n,refreshData:_,isRefreshing:a,isLoading:e}}},ss={class:"pf-c-card"},es={class:"pf-c-card__header"},ts={class:"pf-c-card__actions"},is={class:"pf-c-button__icon"},os={key:0,class:"fas fa-redo","aria-hidden":"true"},ns={key:1,class:"pf-c-spinner pf-m-md",role:"progressbar","aria-valuetext":"Loading...",style:{"--pf-c-spinner--Color":"#6a6e72"}},cs=s("span",{class:"pf-c-spinner__clipper"},null,-1),as=s("span",{class:"pf-c-spinner__lead-ball"},null,-1),ls=s("span",{class:"pf-c-spinner__tail-ball"},null,-1),_s=[cs,as,ls],ds=s("div",{class:"pf-c-card__title"},[s("h2",{class:"pf-c-title pf-m-lg"},"Configuration Status")],-1),rs={class:"pf-c-card__body"},fs={class:"pf-l-grid pf-m-all-6-col-on-sm pf-m-all-3-col-on-lg pf-m-gutter"},ps={class:"pf-l-grid__item"},ms={class:"pf-l-flex pf-m-space-items-sm"},us=s("div",{class:"pf-l-flex__item"},[s("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1),hs={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},gs={class:"pf-l-flex__item"},vs={class:"pf-l-flex__item"},$s={key:0,class:"pf-c-skeleton"},xs={key:1},ks={class:"pf-l-grid__item"},ys={class:"pf-l-flex pf-m-space-items-sm"},bs=s("div",{class:"pf-l-flex__item"},[s("i",{class:"fas fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"})],-1),Cs={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Ls={class:"pf-l-flex__item"},Ss={class:"pf-l-flex__item"},ws={key:0,class:"pf-c-skeleton"},Ds={key:1},Vs={class:"pf-l-grid__item"},Rs={class:"pf-l-flex pf-m-space-items-sm"},Is=s("div",{class:"pf-l-flex__item"},[s("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1),Ps={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Es={class:"pf-l-flex__item"},Hs={class:"pf-l-flex__item pf-m-flex-1"},Ns={key:0,class:"pf-c-skeleton"},Os={key:1},Ms={class:"pf-l-grid__item"},Fs={class:"pf-l-flex pf-m-space-items-sm"},js=s("div",{class:"pf-l-flex__item"},[s("i",{class:"fas fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"})],-1),As={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Bs={class:"pf-l-flex__item"},Gs={class:"pf-l-flex__item pf-m-flex-1"},Qs={key:0,class:"pf-c-skeleton"},Ts={key:1};function zs(f,n,a,e,_,r){const c=p("router-link");return t(),o("div",ss,[s("div",es,[s("div",ts,[s("button",{class:"pf-c-button pf-m-plain",onClick:n[0]||(n[0]=l=>e.refreshData())},[s("span",is,[e.isRefreshing?i("",!0):(t(),o("i",os)),e.isRefreshing?(t(),o("span",ns,_s)):i("",!0)])])]),ds]),s("div",rs,[s("div",fs,[s("div",ps,[s("div",ms,[us,s("div",hs,[s("div",gs,[d(c,{to:"/devices/status/1"},{default:u(()=>[g("Device Count")]),_:1})]),s("div",vs,[e.isLoading?(t(),o("div",$s)):i("",!0),e.isLoading?i("",!0):(t(),o("span",xs,v(e.configinfos.deviceCount)+" total",1))])])])]),s("div",ks,[s("div",ys,[bs,s("div",Cs,[s("div",Ls,[d(c,{to:"/devices/status/0"},{default:u(()=>[g("Devices Down")]),_:1})]),s("div",Ss,[e.isLoading?(t(),o("div",ws)):i("",!0),e.isLoading?i("",!0):(t(),o("span",Ds,v(e.configinfos.deviceDownCount)+" total",1))])])])]),s("div",Vs,[s("div",Rs,[Is,s("div",Ps,[s("div",Es,[d(c,{to:"/device/view/configs/0?id=0&status=all"},{default:u(()=>[g("Config Files")]),_:1})]),s("div",Hs,[e.isLoading?(t(),o("div",Ns)):i("",!0),e.isLoading?i("",!0):(t(),o("span",Os,v(e.configinfos.configTotalCount)+" total",1))])])])]),s("div",Ms,[s("div",Fs,[js,s("div",As,[s("div",Bs,[d(c,{to:"/device/view/configs/0?id=0&status=0"},{default:u(()=>[g("Failed Configs")]),_:1})]),s("div",Gs,[e.isLoading?(t(),o("div",Qs)):i("",!0),e.isLoading?i("",!0):(t(),o("span",Ts,v(e.configinfos.configDownCount)+" total",1))])])])])])])])}const Us=x(Z,[["render",zs]]),Ys={props:{},setup(f){const n=m(!0),a=m(!1),e=L([]),_=m(0),r=S("create-notification");b(()=>{l()});function c(){console.log("refreshing environment details..."),a.value=!0,l()}function l(){n.value=!0,axios.get("/api/dashboard/health-latest").then($=>{Object.assign(e,$.data.data);var y=e.filter(k=>k.notificationMessage.toLowerCase().includes("failed")),C=e.filter(k=>k.notificationMessage.toLowerCase().includes("warning"));(y.length>0||C.length>0)&&(_.value=y.length),a.value=!1,n.value=!1}).catch($=>{r({type:"danger",title:"Error",message:$.response})})}return{failedItems:_,healthChecks:e,isLoading:n,isRefreshing:a,refreshData:c}}},qs={class:"pf-c-card"},Js={class:"pf-c-card__header"},Ks={class:"pf-c-card__actions"},Ws={class:"pf-c-button__icon"},Xs={key:0,class:"fas fa-redo","aria-hidden":"true"},Zs={key:1,class:"pf-c-spinner pf-m-md",role:"progressbar","aria-valuetext":"Loading...",style:{"--pf-c-spinner--Color":"#6a6e72"}},se=s("span",{class:"pf-c-spinner__clipper"},null,-1),ee=s("span",{class:"pf-c-spinner__lead-ball"},null,-1),te=s("span",{class:"pf-c-spinner__tail-ball"},null,-1),ie=[se,ee,te],oe=s("div",{class:"pf-c-card__title"},[s("h2",{class:"pf-c-title pf-m-lg"},"Environment Status")],-1),ne={class:"pf-c-card__body"},ce={key:0,class:"pf-c-skeleton"},ae={key:1,class:"pf-l-grid pf-m-all-6-col-on-sm pf-m-all-3-col-on-lg pf-m-gutter"},le={class:"pf-l-flex pf-m-space-items-sm"},_e={class:"pf-l-flex__item"},de={key:0,class:"fas fa-check-circle pf-u-success-color-100"},re={key:1,class:"fas fa-exclamation-triangle pf-u-warning-color-100"},fe={key:2,class:"fas fa-exclamation-circle pf-u-danger-color-100"},pe={class:"pf-l-flex__item"},me={class:"pf-l-flex__item pf-u-font-size-sm"},ue={class:"pf-u-color-300"},he={key:0},ge={key:0,class:"pf-c-divider"},ve={key:1,class:"pf-c-card__footer",style:{"padding-top":"10px","padding-bottom":"10px"}};function $e(f,n,a,e,_,r){const c=p("router-link");return t(),o("div",qs,[s("div",Js,[s("div",Ks,[s("button",{class:"pf-c-button pf-m-plain",onClick:n[0]||(n[0]=l=>e.refreshData())},[s("span",Ws,[e.isRefreshing?i("",!0):(t(),o("i",Xs)),e.isRefreshing?(t(),o("span",Zs,ie)):i("",!0)])])]),oe]),s("div",ne,[e.isLoading?(t(),o("div",ce)):i("",!0),e.isLoading?i("",!0):(t(),o("div",ae,[(t(!0),o(D,null,V(e.healthChecks,l=>(t(),o("div",{class:"pf-l-grid__item",key:l.name},[s("div",le,[s("div",_e,[l.notificationMessage==="ok"?(t(),o("i",de)):i("",!0),l.notificationMessage==="warning"?(t(),o("i",re)):i("",!0),l.notificationMessage==="failed"?(t(),o("i",fe)):i("",!0)]),s("div",pe,[s("span",null,v(l.label),1)]),s("div",me,[s("span",ue,[g(v(l.status)+" ",1),l.shortSummary!=""?(t(),o("span",he," - "+v(l.shortSummary),1)):i("",!0)])])])]))),128))]))]),e.failedItems!=0?(t(),o("hr",ge)):i("",!0),e.failedItems!=0?(t(),o("div",ve,[d(c,{to:"/settings/overview"},{default:u(()=>[g("View Help")]),_:1})])):i("",!0)])}const xe=x(Ys,[["render",$e]]),ke={props:{},components:{HelpContent:R},setup(f,{emit:n}){function a(){localStorage.setItem("rconfig.dashboardHelpCardShow",!1),n("removeDashboardHelpCard")}return{removeDashboardHelpCard:a}}},ye={class:"pf-c-card pf-m-expanded"},be={class:"pf-c-card__header"},Ce={class:"pf-c-card__actions"},Le=s("span",{class:"pf-c-button__icon"},[s("i",{class:"fas fa-times","aria-hidden":"true"})],-1),Se=[Le],we=s("div",{class:"pf-c-card__title"},"Getting started with V6 Core",-1);function De(f,n,a,e,_,r){const c=p("help-content");return t(),o("div",ye,[s("div",be,[s("div",Ce,[s("button",{class:"pf-c-button pf-m-plain",onClick:n[0]||(n[0]=l=>e.removeDashboardHelpCard()),alt:"Click to remove this help card from the dashboard!",title:"Click to remove this help card from the dashboard!",style:{cursor:"help"}},Se)]),we]),d(c)])}const Ve=x(ke,[["render",De]]),Re={props:{},components:{DeviceViewDeviceDetailsDescr:P},setup(f){const n=L({}),a=m(!1),e=m(!1);b(()=>{r()});function _(){console.log("refreshing server details..."),a.value=!0,r()}function r(){e.value=!0,axios.get("/api/dashboard/sysinfo").then(c=>{Object.assign(n,c.data),a.value=!1,e.value=!1})}return{sysinfo:n,refreshData:_,isRefreshing:a,isLoading:e}}},Ie={class:"pf-c-card"},Pe={class:"pf-c-card__header"},Ee={class:"pf-c-card__actions"},He={class:"pf-c-button__icon"},Ne={key:0,class:"fas fa-redo","aria-hidden":"true"},Oe={key:1,class:"pf-c-spinner pf-m-md",role:"progressbar","aria-valuetext":"Loading...",style:{"--pf-c-spinner--Color":"#6a6e72"}},Me=s("span",{class:"pf-c-spinner__clipper"},null,-1),Fe=s("span",{class:"pf-c-spinner__lead-ball"},null,-1),je=s("span",{class:"pf-c-spinner__tail-ball"},null,-1),Ae=[Me,Fe,je],Be=s("div",{class:"pf-c-card__title"},[s("h2",{class:"pf-c-title pf-m-lg"},"System Details")],-1),Ge={class:"pf-c-card__body"},Qe={class:"pf-c-description-list"},Te={class:"pf-c-description-list__group"},ze=s("dt",{class:"pf-c-description-list__term"},"OS VERSION",-1),Ue={key:0,class:"pf-c-skeleton"},Ye={class:"pf-c-description-list__group"},qe=s("dt",{class:"pf-c-description-list__term"},"SERVERNAME",-1),Je={key:0,class:"pf-c-skeleton"},Ke={class:"pf-c-description-list__group"},We=s("dt",{class:"pf-c-description-list__term"},"LOCAL IP",-1),Xe={key:0,class:"pf-c-skeleton"},Ze={class:"pf-c-description-list__group"},st=s("dt",{class:"pf-c-description-list__term"},"PUBLIC IP",-1),et={key:0,class:"pf-c-skeleton"},tt={class:"pf-c-description-list__group"},it=s("dt",{class:"pf-c-description-list__term"},"PHP / LARAVEL VERSION",-1),ot={key:0,class:"pf-c-skeleton"},nt={class:"pf-c-description-list__group"},ct=s("dt",{class:"pf-c-description-list__term"},"REDIS VERSION",-1),at={key:0,class:"pf-c-skeleton"},lt={class:"pf-c-description-list__group"},_t=s("dt",{class:"pf-c-description-list__term"},"MYSQL VERSION",-1),dt={key:0,class:"pf-c-skeleton"},rt=s("hr",{class:"pf-c-divider"},null,-1),ft={class:"pf-c-card__footer"};function pt(f,n,a,e,_,r){const c=p("device-view-device-details-descr"),l=p("router-link");return t(),o("div",Ie,[s("div",Pe,[s("div",Ee,[s("button",{class:"pf-c-button pf-m-plain",onClick:n[0]||(n[0]=$=>e.refreshData())},[s("span",He,[e.isRefreshing?i("",!0):(t(),o("i",Ne)),e.isRefreshing?(t(),o("span",Oe,Ae)):i("",!0)])])]),Be]),s("div",Ge,[s("dl",Qe,[s("div",Te,[ze,e.isLoading?(t(),o("div",Ue)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.OSVersion},null,8,["text"]))]),s("div",Ye,[qe,e.isLoading?(t(),o("div",Je)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.ServerName},null,8,["text"]))]),s("div",Ke,[We,e.isLoading?(t(),o("div",Xe)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.localIp},null,8,["text"]))]),s("div",Ze,[st,e.isLoading?(t(),o("div",et)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.PublicIP},null,8,["text"]))]),s("div",tt,[it,e.isLoading?(t(),o("div",ot)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.PHPVersion},null,8,["text"]))]),s("div",nt,[ct,e.isLoading?(t(),o("div",at)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.RedisVersion},null,8,["text"]))]),s("div",lt,[_t,e.isLoading?(t(),o("div",dt)):i("",!0),e.isLoading?i("",!0):(t(),h(c,{key:1,text:e.sysinfo.MySQLVersion},null,8,["text"]))])])]),rt,s("div",ft,[d(l,{to:"/settings/overview"},{default:u(()=>[g("View Settings")]),_:1})])])}const mt=x(Re,[["render",pt]]),ut={components:{CommonActionsMenu:X,ConfigStatusCard:Us,EnvStatusCard:xe,GettingStarted:Ve,PageHeader:I,ServerDetails:mt},setup(){const f=m("Dashboard"),n=m("Overview of rConfig activity and statistics"),a=m(!0);return b(()=>{a.value=localStorage.getItem("rconfig.dashboardHelpCardShow")}),{pagename:f,pagedesc:n,gettingStartedShow:a}}},ht={class:"pf-c-page__main",tabindex:"-1"},gt=s("div",{class:"pf-c-divider",role:"separator"},null,-1),vt={class:"pf-c-page__main-section pf-m-no-padding"},$t={class:"pf-c-drawer pf-m-expanded pf-m-inline-on-2xl"},xt={class:"pf-c-drawer__main"},kt={class:"pf-c-drawer__content pf-m-no-background"},yt={class:"pf-c-drawer__body pf-m-padding"},bt={class:"pf-l-grid pf-m-gutter"},Ct={class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"},Lt={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"};function St(f,n,a,e,_,r){const c=p("page-header"),l=p("server-details"),$=p("config-status-card"),y=p("env-status-card"),C=p("getting-started"),k=p("common-actions-menu");return t(),o("main",ht,[d(c,{pagename:e.pagename,desc:e.pagedesc},null,8,["pagename","desc"]),gt,s("section",vt,[s("div",$t,[s("div",xt,[s("div",kt,[s("div",yt,[s("div",bt,[s("div",Ct,[d(l)]),s("div",Lt,[d($),d(y,{class:"pf-u-mt-md"}),e.gettingStartedShow!=="false"?(t(),h(C,{key:0,onRemoveDashboardHelpCard:n[0]||(n[0]=wt=>e.gettingStartedShow="false"),class:"pf-u-mt-md pf-l-grid__item pf-m-all-6-col-on-sm pf-m-all-4-col-on-md pf-m-all-2-col-on-lg pf-m-all-1-col-on-xl"})):i("",!0)]),d(k,{class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"})])])])])])])])}const Ht=x(ut,[["render",St]]);export{Ht as default};
