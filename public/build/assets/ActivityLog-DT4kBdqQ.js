import{u as j}from"./ViewFunctions-Bspdb8wp.js";import{P as V}from"./PageHeader-Bl5o5qxR.js";import{_ as T,f as v,m as z,o as n,c,a as e,t as w,j as k,h as p,F as C,e as D,x as q,b as F,w as E,B as R,l as x,k as B,q as h,i as P,r as u,A as U,g as W}from"./app-DWPMZhx6.js";import{D as H,a as J,u as K,b as G}from"./DeleteModal-B1xPwAOz.js";import{D as Q}from"./DataTableSpinner-CZOI5RhJ.js";import{D as X}from"./DataTableToolbar-CEtFvXhG.js";import{U as Y}from"./UsersForm-Dnh6QHht.js";/* empty css            */import"./LoadingSpinner-C_eT8odB.js";const Z={props:{},emits:["filter"],setup(d,{emit:o}){const a=v(!1),t=v(),f=v(null);z(f,_=>l());function m(_){t.value=_.target.innerText!="All"?_.target.innerText:"",a.value=!1,o("filter",t.value.toLowerCase())}function l(){a.value=!1}return{showOptions:a,clickOutsidetarget:f,selectFilter:m,selectedFilter:t}}},$=e("hr",{class:"pf-c-divider pf-m-vertical"},null,-1),ee={class:"pf-c-toolbar__group pf-m-filter-group",ref:"clickOutsidetarget"},te={class:"pf-c-toolbar__item"},ae={class:"pf-c-select",style:{width:"150px"}},oe=e("span",{hidden:""},"Filter on type",-1),se={class:"pf-c-select__toggle-wrapper"},ne=["textContent"],le=e("span",{class:"pf-c-select__toggle-arrow"},[e("i",{class:"fas fa-caret-down","aria-hidden":"true"})],-1),ce=["hidden"],ie={role:"presentation"},re={class:"pf-c-select__menu-item-icon"},de={key:0,class:"fas fa-check","aria-hidden":"true"},_e={role:"presentation"},pe={class:"pf-c-select__menu-item-icon"},fe={key:0,class:"fas fa-check","aria-hidden":"true"},me={role:"presentation"},ge={class:"pf-c-select__menu-item-icon"},be={key:0,class:"fas fa-check","aria-hidden":"true"},ue={role:"presentation"},he={class:"pf-c-select__menu-item-icon"},ye={key:0,class:"fas fa-check","aria-hidden":"true"},we={role:"presentation"},ke={class:"pf-c-select__menu-item-icon"},ve={key:0,class:"fas fa-check","aria-hidden":"true"};function Ce(d,o,a,t,f,m){return n(),c(C,null,[$,e("div",ee,[e("div",te,[e("div",ae,[oe,e("button",{class:"pf-c-select__toggle",type:"button",onClick:o[0]||(o[0]=l=>t.showOptions=!t.showOptions)},[e("div",se,[e("span",{class:"pf-c-select__toggle-text",textContent:w(t.selectedFilter?t.selectedFilter:"Filter on type")},null,8,ne)]),le]),e("ul",{class:"pf-c-select__menu multi-select-dropdown-overflow",role:"listbox",hidden:!t.showOptions},[e("li",ie,[e("button",{class:"pf-c-select__menu-item",role:"option",onClick:o[1]||(o[1]=(...l)=>t.selectFilter&&t.selectFilter(...l))},[k(" Info"),e("span",re,[t.selectedFilter==="Info"?(n(),c("i",de)):p("",!0)])])]),e("li",_e,[e("button",{class:"pf-c-select__menu-item",role:"option",onClick:o[2]||(o[2]=(...l)=>t.selectFilter&&t.selectFilter(...l))},[k(" Warning"),e("span",pe,[t.selectedFilter==="Warning"?(n(),c("i",fe)):p("",!0)])])]),e("li",me,[e("button",{class:"pf-c-select__menu-item",role:"option",onClick:o[3]||(o[3]=(...l)=>t.selectFilter&&t.selectFilter(...l))},[k(" Error"),e("span",ge,[t.selectedFilter==="Error"?(n(),c("i",be)):p("",!0)])])]),e("li",ue,[e("button",{class:"pf-c-select__menu-item",role:"option",onClick:o[4]||(o[4]=(...l)=>t.selectFilter&&t.selectFilter(...l))},[k(" Critical"),e("span",he,[t.selectedFilter==="Critical"?(n(),c("i",ye)):p("",!0)])])]),e("li",we,[e("button",{class:"pf-c-select__menu-item",role:"option",onClick:o[5]||(o[5]=(...l)=>t.selectFilter&&t.selectFilter(...l))},[k(" All"),e("span",ke,[t.selectedFilter===""?(n(),c("i",ve)):p("",!0)])])])],8,ce)])])],512)],64)}const xe=T(Z,[["render",Ce]]),De={components:{ActivityLogFilter:xe,DataTableEmptyState:H,DataTablePaginate:J,DataTableSpinner:Q,DataTableToolbar:X},props:{pagename:{type:String},tabledata:{type:Object,required:[]},searchInputDisabled:{type:Boolean,default:!0},newBtnEnabled:{type:Boolean,default:!0},taskRunBtnEnabled:{type:Boolean,default:!1},editBtnEnabled:{type:Boolean,default:!0}},emits:["openDrawer","deleteRow","pagechanged","showTaskRunConfirmModal","actionLink"],setup(d,{emit:o}){const a=D({pageParams:{page:1,per_page:10,filters:null,sortby:null,sortOrder:"desc"},sortIcon:{base:"fas fa-arrows-alt-v",is:"fa-sort",up:"fas fa-long-arrow-alt-up",down:"fas fa-long-arrow-alt-down"}}),t=D({critical:"fas fa-exclamation-circle pf-u-danger-color-100",error:"fas fa-exclamation-circle pf-u-danger-color-100",warn:"fa fa-exclamation-triangle pf-u-warning-color-100",info:"fas fa-fw fa-info-circle pf-u-info-color-100",default:"fas fa-fw fa-info-circle pf-u-info-color-100"}),f=P("formatTime"),m=v(a.sortIcon.base),l=v(0),_=v([]),y=P("create-notification"),{toClipboard:g}=U(),{setupResizableTable:O}=K();q(()=>{d.tabledata.isLoading||O()});function s(i,b=!1){o("openDrawer",{id:i,isClone:b})}function r(i){o("deleteRow",i)}function I(){a.pageParams.filters="",o("pagechanged",a.pageParams)}function S(i){a.pageParams.filters=i,o("pagechanged",a.pageParams)}function L(i){a.pageParams.page=i.page,a.pageParams.per_page=i.per_page,o("pagechanged",a.pageParams)}function A(i,b){m.value=a.pageParams.sortOrder==="desc"?a.sortIcon.up:a.sortIcon.down,l.value=b,a.pageParams.sortby=i,a.pageParams.sortOrder=a.pageParams.sortOrder==="desc"?"asc":"desc",o("pagechanged",a.pageParams)}function M(i){o("showTaskRunConfirmModal",i)}function N(i){const b=_.value.indexOf(i);b>-1?_.value.splice(b,1):_.value.push(i)}return{activityLogIconTable:t,addFilters:S,clearFilters:I,copy:async i=>{try{await g(JSON.stringify(i)),y({type:"success",title:"Copy Success",message:"Output copied to clipboard"})}catch(b){y({type:"danger",title:"Error",message:b})}},data:a,deleteRow:r,formatTime:f,emitShowTaskRunConfirmModal:M,expanded:_,isSorted:l,openDrawer:s,pageChanged:L,sortBy:A,sortIcon:m,toggleRowExpansion:N}}},Fe={class:"pf-c-drawer__content pf-m-no-background"},Oe={class:"pf-c-drawer__body pf-m-padding"},Be={class:"pf-c-card"},Pe={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid",id:"resizeMe"},Te={role:"row",id:"headerRow"},Ie=e("td",{class:"pf-c-table__toggle",role:"cell"},null,-1),Ee={key:0},Re=["onClick"],Se={class:"pf-c-table__button-content"},Le={class:"pf-c-table__text"},Ae={class:"pf-c-table__sort-indicator"},Me=e("th",{class:"pf-c-table__icon pf-m-fit-content",role:"columnheader",scope:"col"},"Actions",-1),Ne={role:"row"},je={class:"pf-c-table__toggle",role:"cell"},Ve=["onClick"],ze=e("div",{class:"pf-c-table__toggle-icon"},[e("i",{class:"fas fa-angle-down","aria-hidden":"true"})],-1),qe=[ze],Ue=["data-label"],We={class:"pf-c-button__icon pf-m-start"},He={key:0},Je={key:1},Ke={role:"cell","data-label":"Actions",class:"pf-m-fit-content"},Ge=["onClick"],Qe=e("span",{class:"pf-c-button__icon pf-m-start"},[e("i",{class:"fas fa-trash","aria-hidden":"true"})],-1),Xe=e("td",null,null,-1),Ye=e("td",null,null,-1),Ze={role:"cell",colspan:"4",id:"table-expandable-content1"},$e={class:"pf-c-table__expandable-row-content"},et={class:"pf-c-code-block"},tt={class:"pf-c-code-block__header"},at={class:"pf-c-code-block__actions"},ot={class:"pf-c-code-block__actions-item"},st=["onClick"],nt=e("i",{class:"fas fa-copy","aria-hidden":"true"},null,-1),lt=[nt],ct={class:"pf-c-code-block__content"},it={class:"pf-c-code-block__pre"},rt={class:"pf-c-code-block__code"},dt=e("td",null,null,-1);function _t(d,o,a,t,f,m){const l=u("activity-log-filter"),_=u("data-table-toolbar"),y=u("data-table-spinner"),g=u("data-table-empty-state"),O=u("data-table-paginate");return n(),c("div",Fe,[e("div",Oe,[e("div",Be,[F(_,{pagename:a.pagename,onSearchInput:o[1]||(o[1]=s=>t.addFilters(s)),onOpenDrawer:o[2]||(o[2]=s=>t.openDrawer(s)),newBtnEnabled:a.newBtnEnabled,searchInputDisabled:a.searchInputDisabled},{customFilter:E(()=>[R(d.$slots,"customFilter",{},()=>[F(l,{onFilter:o[0]||(o[0]=s=>t.addFilters(s))})])]),customButtons:E(()=>[R(d.$slots,"customButtons")]),_:3},8,["pagename","newBtnEnabled","searchInputDisabled"]),a.tabledata.isLoading?(n(),x(y,{key:0})):p("",!0),e("table",Pe,[e("thead",null,[e("tr",Te,[Ie,(n(!0),c(C,null,B(a.tabledata.headers,(s,r)=>(n(),c("th",{key:s.name,class:h(["pf-m-truncate pf-c-table__sort pf-c-table__icon",t.isSorted===r?"pf-m-selected":""])},[s.sortable?p("",!0):(n(),c("span",Ee,w(s.label),1)),s.sortable?(n(),c("button",{key:1,class:"pf-c-table__button",onClick:I=>t.sortBy(s.key,r)},[e("div",Se,[e("span",Le,w(s.label),1),e("span",Ae,[e("i",{class:h(t.isSorted===r?t.sortIcon:t.data.sortIcon.base)},null,2)])])],8,Re)):p("",!0)],2))),128)),Me])]),a.tabledata.data.data&&Object.keys(a.tabledata.data.data).length>0?(n(!0),c(C,{key:0},B(a.tabledata.data.data,s=>(n(),c("tbody",{role:"rowgroup",key:s.name,class:h({"pf-m-expanded":t.expanded.includes(s.id)})},[e("tr",Ne,[e("td",je,[e("button",{class:h(["pf-c-button pf-m-plain",{"pf-m-expanded":t.expanded.includes(s.id)}]),"aria-labelledby":"table-expandable-node1 table-expandable-expandable-toggle1",id:"table-expandable-expandable-toggle1","aria-label":"Details","aria-controls":"table-expandable-content1","aria-expanded":"true",onClick:r=>t.toggleRowExpansion(s.id)},qe,10,Ve)]),(n(!0),c(C,null,B(a.tabledata.headers,r=>(n(),c("td",{key:r.label,role:"cell","data-label":r.label},[e("span",We,[r.key==="log_name"?(n(),c("i",{key:0,class:h(t.activityLogIconTable[s.log_name])},null,2)):p("",!0)]),r.key==="created_at"?(n(),c("div",He,w(t.formatTime(s[r.key])),1)):(n(),c("span",Je,w(s[r.key]),1))],8,Ue))),128)),e("td",Ke,[e("div",null,[e("button",{class:"pf-c-button pf-m-link pf-m-danger pf-m-small",type:"button",onClick:r=>t.deleteRow(s.id),alt:"Delete",title:"Delete"},[Qe,k(" Delete ")],8,Ge)])])]),e("tr",{class:h(["pf-c-table__expandable-row",{"pf-m-expanded":t.expanded.includes(s.id)}]),role:"row"},[Xe,Ye,e("td",Ze,[e("div",$e,[e("div",et,[e("div",tt,[e("div",at,[e("div",ot,[e("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Copy to clipboard",onClick:r=>t.copy(s)},lt,8,st)])])]),e("div",ct,[e("pre",it,[e("code",rt,w(s),1)])])])])]),dt],2)],2))),128)):p("",!0),a.tabledata.data.data&&Object.keys(a.tabledata.data.data).length<1?(n(),x(g,{key:1,onClear:t.clearFilters},null,8,["onClear"])):p("",!0)]),a.tabledata.isLoading?p("",!0):(n(),x(O,{key:1,from:a.tabledata.data.from,to:a.tabledata.data.to,total:a.tabledata.data.total,current_page:a.tabledata.data.current_page,last_page:a.tabledata.data.last_page,onPagechanged:o[3]||(o[3]=s=>t.pageChanged(s))},null,8,["from","to","total","current_page","last_page"]))])])])}const pt=T(De,[["render",_t]]),ft={components:{UsersForm:Y,PageHeader:V,DataTableActivityLogs:pt,DeleteModal:G},setup(){P("create-notification");const d=D({editid:0,pagename:"Activity Log",pagedesc:"rConfig system activity log",pagenamesingle:"Activity Log",modelName:"activitylogs",openDrawerState:!1,showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{log_name:"",description:"",created_at:""}}),{models:o,isLoading:a,dataTablePageChanged:t,deleteRow:f,confirmDelete:m,destroyModel:l}=j(d,d.modelName,d.modelObject);W(()=>{t(d.pageOptionsState)});const _=D({headers:[{key:"log_name",label:"Type",sortable:!0,hasActivityIcon:!0},{key:"description",label:"Description",sortable:!1},{key:"created_at",label:"Created",sortable:!1}],data:o,isLoading:a});return{viewstate:d,dataTablePageChanged:t,deleteRow:f,confirmDelete:m,table:_,destroyModel:l}}},mt={class:"pf-c-page__main",tabindex:"-1"},gt=e("div",{class:"pf-c-divider",role:"separator"},null,-1),bt={class:"pf-c-page__main-section pf-m-no-padding"},ut={class:"pf-c-drawer__main"};function ht(d,o,a,t,f,m){const l=u("page-header"),_=u("data-table-activity-logs"),y=u("delete-modal");return n(),c(C,null,[e("main",mt,[F(l,{pagename:t.viewstate.pagename,desc:t.viewstate.pagedesc},null,8,["pagename","desc"]),gt,e("section",bt,[e("div",{class:h(["pf-c-drawer",{"pf-m-expanded":t.viewstate.openDrawerState}])},[e("div",ut,[F(_,{pagename:t.viewstate.pagenamesingle,tabledata:t.table,onPagechanged:t.dataTablePageChanged,onOpenDrawer:o[0]||(o[0]=g=>d.openDrawer(g)),onDeleteRow:o[1]||(o[1]=g=>t.deleteRow(g)),newBtnEnabled:!1,editBtnEnabled:!1},null,8,["pagename","tabledata","onPagechanged"])])],2)])]),t.viewstate.showDeleteModal?(n(),x(y,{key:0,editid:t.viewstate.editid,onCloseModal:o[2]||(o[2]=g=>t.viewstate.showDeleteModal=!1),onConfirmDelete:t.confirmDelete},null,8,["editid","onConfirmDelete"])):p("",!0)],64)}const Pt=T(ft,[["render",ht]]);export{Pt as default};
