import{_ as T,u as R,f as g,g as j,o as c,c as r,a as e,b as p,w as y,h as v,t as m,i as M,r as u,d as V,q as D,l as $,F as O,k as P,e as N,y as I,j as x,B,m as z,C as q,A as E}from"./app-yqjNgO-O.js";import{D as K}from"./DeviceViewDeviceDetailsDescr-hrErcfbD.js";import{D as H}from"./DevicesBreadcrumbs-J69TMVxs.js";import{D as W}from"./DevicesForm-MU8-15iS.js";import{L as U}from"./LoadingSpinner-RqEGdPri.js";import{P as G}from"./PageHeader-Irb8nX_B.js";import{S as J}from"./SideDrawer-ptJW9ygh.js";import{a as Q,u as Y}from"./ViewFunctions-j-ticmk1.js";/* empty css            */import"./CopyLogo-10NMC9FQ.js";import"./DeviceCategoryField-JvxwdFVB.js";import"./MultiSelect-8ZOGVYrm.js";const X={props:{model:{type:Object,default:()=>({})}},components:{},setup(d,{emit:s}){const o=M("create-notification"),{toClipboard:t}=R(),l=g(!1),_=g(null);j(()=>{n()});function n(){axios.get("/api/app-dir-path").then(f=>{l.value=f.data})}function a(){_.value="Downloading...",o({type:"success",title:"Download Started",message:"Download started for device "+d.model.device_name}),axios.post("/api/device/download-now",{device_id:d.model.id}).then(f=>{_.value="Queued...",o({type:"success",title:"Download Started",message:"Download job for "+d.model.device_name+" was pushed to the queue."}),i()}).catch(f=>{o({type:"danger",title:"Error",message:f.response.data.message})})}function i(){const f=setInterval(function(){axios.get("/api/tracked-jobs/"+d.model.id).then(h=>{_.value=h.data.data.status}),_.value==="finished"&&(o({type:"success",title:"Download Finished",message:"Download finished for device "+d.model.device_name}),clearInterval(f),setTimeout(()=>{_.value=null},3e3))},2e3)}function k(){axios.post("/api/device/purge-failed-configs",{device_id:d.model.id}).then(f=>{o({type:"success",title:"Purge Successful",message:"Purge successful for device "+d.model.device_name})}).catch(f=>{o({type:"danger",title:"Error",message:f.response.data.message})})}function S(f){try{t(f),o({type:"success",message:"Copied to clipboard!",duration:3})}catch(h){o({type:"danger",title:"Error",message:h.response})}}function b(f,h=!1){s("openDrawer",{id:f,isClone:h})}return{appDirPath:l,copyDebug:S,downloadNow:a,downloadStatus:_,openDrawer:b,purgeFailedConfigs:k}}},Z={class:"pf-c-card"},ee=e("div",{class:"pf-c-card__title"},[e("h2",{class:"pf-c-title pf-m-xl"},"Common Actions")],-1),te={class:"pf-c-menu"},oe={class:"pf-c-menu__content"},se={class:"pf-c-menu__list"},ie={class:"pf-c-menu__list-item"},ne=V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-code" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Copy debug CLI command</span></span><span class="pf-c-menu__item-description pf-u-text-break-word">Copy command for CLI debug to clipboard</span>',2),ae=[ne],ce={class:"pf-c-menu__list-item"},le=e("span",{class:"pf-c-menu__item-main"},[e("span",{class:"pf-c-menu__item-icon"},[e("i",{class:"pficon pf-icon-storage-domain","aria-hidden":"true"})]),e("span",{class:"pf-c-menu__item-text"},"View configuration downloads")],-1),de=e("span",{class:"pf-c-menu__item-description"},"View configuration files for this device",-1),re={class:"pf-c-menu__list-item"},_e=V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="pficon pf-icon-save" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Download now</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Start a download for this device</span>',2),fe=[_e],pe={key:0,class:"pf-c-menu__list-item",style:{cursor:"auto"}},me={class:"pf-c-menu__item"},ue={class:"pf-c-menu__item-main"},ve={class:"pf-c-menu__item-icon"},ge={key:0,class:"pf-c-spinner pf-m-md",role:"progressbar",viewBox:"0 0 100 100","aria-label":"Loading..."},he=e("circle",{class:"pf-c-spinner__path",cx:"50",cy:"50",r:"45",fill:"none"},null,-1),we=[he],be={key:1,class:"fa fa-check-circle pf-u-success-color-100","aria-hidden":"true"},xe={key:2,class:"fa fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"},ye=e("span",{class:"pf-c-menu__item-text"},"Download status",-1),De={class:"pf-c-menu__item-description pf-u-text-break-word",style:{"word-wrap":"normal"}},ke={class:"pf-c-menu__list-item"},Ce=V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-copy" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Clone device</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Create a new device with similar configuration</span>',2),Se=[Ce],$e={class:"pf-c-menu__list-item"},Te=V('<span class="pf-c-menu__item-main"><span class="pf-c-menu__item-icon"><i class="fas fa-trash" aria-hidden="true"></i></span><span class="pf-c-menu__item-text">Purge failed configs</span></span><span class="pf-c-menu__item-description pf-u-text-break-word" style="word-wrap:normal;">Purge all Failed Configs for this device</span>',2),Le=[Te];function Me(d,s,o,t,l,_){const n=u("router-link");return c(),r("div",null,[e("div",Z,[ee,e("div",te,[e("div",oe,[e("ul",se,[e("li",ie,[e("button",{class:"pf-c-menu__item",type:"button",onClick:s[0]||(s[0]=a=>t.copyDebug("cd "+t.appDirPath+" && php artisan rconfig:download-device "+o.model.id+" -d"))},ae)]),e("li",ce,[p(n,{to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:"all"}},class:"pf-c-menu__item",type:"button"},{default:y(()=>[le,de]),_:1},8,["to"])]),e("li",re,[e("button",{class:"pf-c-menu__item",onClick:s[1]||(s[1]=a=>t.downloadNow())},fe)]),t.downloadStatus?(c(),r("li",pe,[e("button",me,[e("span",ue,[e("span",ve,[t.downloadStatus!="The job finished, check configs and logs for details."?(c(),r("svg",ge,we)):v("",!0),t.downloadStatus==="The job finished, check configs and logs for details."?(c(),r("i",be)):v("",!0),t.downloadStatus==="Failed"?(c(),r("i",xe)):v("",!0)]),ye]),e("span",De,m(t.downloadStatus),1)])])):v("",!0),e("li",ke,[e("button",{class:"pf-c-menu__item",onClick:s[2]||(s[2]=a=>t.openDrawer(o.model.id,!0))},Se)]),e("li",$e,[e("button",{class:"pf-c-menu__item",onClick:s[3]||(s[3]=a=>t.purgeFailedConfigs())},Le)])])])])])])}const Ne=T(X,[["render",Me]]),Ve={props:{model:{type:Object,default:()=>({})}},emits:["openDrawer","deleteRow","pagechanged"],components:{DeviceViewDeviceDetailsDescr:K},setup(d,{emit:s}){const o=M("formatTime");function t(l,_=!1){s("openDrawer",{id:l,isClone:_})}return{openDrawer:t,formatTime:o}}},Oe={class:"pf-c-card"},Pe=e("div",{class:"pf-c-card__title"},[e("h2",{class:"pf-c-title pf-m-xl"},"Device Details")],-1),je={class:"pf-c-card__body"},Fe={class:"pf-c-description-list pf-m-horizontal pf-m-vertical-on-md pf-m-horizontal-on-lg pf-m-vertical-on-xl pf-m-horizontal-on-2xl"},Ae={class:"pf-c-description-list__group"},qe=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Device ID")],-1),Ee={class:"pf-c-description-list__group"},Re=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Hostname")],-1),Ie={class:"pf-c-description-list__group"},Be=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"IP Address")],-1),ze={class:"pf-c-description-list__group"},Ke=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Status")],-1),He={class:"pf-l-flex pf-m-space-items-sm"},We={class:"pf-l-flex__item"},Ue={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},Ge={class:"pf-l-flex__item"},Je={class:"pf-l-flex__item"},Qe={class:"pf-u-color-400"},Ye={class:"pf-c-description-list__group"},Xe=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Category")],-1),Ze={class:"pf-c-description-list__group"},et=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Vendor")],-1),tt={class:"pf-c-description-list__group"},ot=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Model")],-1),st={class:"pf-c-description-list__group"},it=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Template")],-1),nt={class:"pf-c-description-list__group"},at=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Created")],-1),ct={class:"pf-c-description-list__group"},lt=e("dt",{class:"pf-c-description-list__term"},[e("span",{class:"pf-c-description-list__text"},"Tags")],-1),dt={class:"pf-c-description-list__description"},rt=["alt","title"],_t=e("hr",{class:"pf-c-divider"},null,-1),ft={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function pt(d,s,o,t,l,_){const n=u("device-view-device-details-descr");return c(),r("div",Oe,[Pe,e("div",je,[e("dl",Fe,[e("div",Ae,[qe,p(n,{text:o.model.id},null,8,["text"])]),e("div",Ee,[Re,p(n,{text:o.model.device_name},null,8,["text"])]),e("div",Ie,[Be,p(n,{text:o.model.device_ip},null,8,["text"])]),e("div",ze,[Ke,e("div",He,[e("div",We,[e("i",{class:D(o.model.status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"fa fa-exclamation-triangle pf-u-warning-color-100")},null,2)]),e("div",Ue,[e("div",Ge,m(o.model.status=="1"?"Online":"Unreachable"),1),e("div",Je,[e("span",Qe,"Last seen: "+m(o.model.last_seen?t.formatTime(o.model.last_seen):"-"),1)])])])]),e("div",Ye,[Xe,o.model.category.length!=0?(c(),$(n,{key:0,text:o.model.category[0].categoryName},null,8,["text"])):v("",!0)]),e("div",Ze,[et,p(n,{text:o.model.vendor[0].vendorName},null,8,["text"])]),e("div",tt,[ot,p(n,{text:o.model.device_model},null,8,["text"])]),e("div",st,[it,o.model.template.length!=0?(c(),$(n,{key:0,text:o.model.template[0].templateName},null,8,["text"])):v("",!0)]),e("div",nt,[at,o.model.template.length!=0?(c(),$(n,{key:0,text:t.formatTime(o.model.created_at)},null,8,["text"])):v("",!0)]),e("div",ct,[lt,e("dd",dt,[(c(!0),r(O,null,P(o.model.tag,a=>(c(),r("div",{class:"pf-c-chip",key:a.id},[e("span",{class:"pf-c-chip__text",alt:a.tagDescription,title:a.tagDescription},m(a.tagname),9,rt)]))),128))])])])]),_t,e("div",ft,[e("button",{class:"pf-c-button pf-m-link",style:{float:"right"},type:"button",onClick:s[0]||(s[0]=a=>t.openDrawer(o.model.id)),alt:"Edit",title:"Edit"},"Edit Settings")])])}const mt=T(Ve,[["render",pt]]),ut={props:{model:{type:Object,default:()=>({})}},components:{},setup(d){const s=N({}),o=g(!0),t=M("formatTime");j(()=>{l()});function l(){axios.get("/api/configs/latest-by-deviceid/"+d.model.id).then(_=>{Object.assign(s,_.data),o.value=!1}).catch(_=>{console.log(_)})}return I(()=>{d.model.config_good_count&&l()}),{formatTime:t,isLoading:o,latestConfigs:s}}},vt={class:"pf-c-card",style:{"margin-top":"18px"}},gt=V('<div class="pf-c-toolbar"><div class="pf-c-toolbar__content"><div class="pf-c-toolbar__content-section pf-m-nowrap"><div class="pf-c-toolbar__group pf-m-toggle-group pf-m-show-on-xl"><h2 class="pf-c-title pf-m-xl">Latest downloads</h2></div></div></div></div>',1),ht={class:"pf-c-table pf-m-compact pf-m-grid-lg",role:"grid"},wt=e("thead",null,[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col"},"Command"),e("th",{role:"columnheader",scope:"col"},"Filename"),e("th",{role:"columnheader",scope:"col"},"Downloaded"),e("th",{class:"pf-c-table__icon",role:"columnheader",scope:"col"},"Status"),e("th",{role:"columnheader"})])],-1),bt={role:"rowgroup"},xt={lass:"pf-m-break-word",role:"columnheader","data-label":"Command"},yt={class:"pf-m-break-word",role:"cell","data-label":"Filename"},Dt={class:"pf-m-break-word",role:"cell","data-label":"Downloaded"},kt={class:"pf-c-table__icon",role:"cell","data-label":"Status"},Ct={role:"cell","data-label":"Action"},St={class:"pf-c-card__footer",style:{"padding-top":"15px","padding-bottom":"15px","padding-left":"9px"}};function $t(d,s,o,t,l,_){const n=u("router-link");return c(),r("div",vt,[gt,e("table",ht,[wt,e("tbody",bt,[(c(!0),r(O,null,P(t.latestConfigs.data,a=>(c(),r("tr",{role:"row",key:a.id},[e("th",xt,m(a.command),1),e("td",yt,m(a.config_filename),1),e("td",Dt,m(t.formatTime(a.created_at)),1),e("td",kt,[e("i",{class:D(a.download_status=="0"?"fa fa-exclamation-circle pf-u-danger-color-100":"")},null,2),e("i",{class:D(a.download_status=="1"?"fa fa-check-circle pf-u-success-color-100 ":"")},null,2),e("i",{class:D(a.download_status=="2"?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2),e("i",{class:D(a.download_status===null?"fa fa-exclamation-triangle pf-u-warning-color-100":"")},null,2)]),e("td",Ct,[p(n,{type:"button",class:"pf-c-button pf-m-link",to:"/device/view/configs/view-config/"+a.id},{default:y(()=>[x("View")]),_:2},1032,["to"])])]))),128))])]),e("div",St,[p(n,{type:"button",class:"pf-c-button pf-m-link",style:{float:"right"},to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:"all"}}},{default:y(()=>[x("View all")]),_:1},8,["to"])])])}const Tt=T(ut,[["render",$t]]),Lt={props:{},setup(d){return{}}},Mt={class:"pf-c-tooltip pf-m-top-left",role:"tooltip",style:{"z-index":"999",position:"absolute",top:"26%"}},Nt=e("div",{class:"pf-c-tooltip__arrow"},null,-1),Vt={class:"pf-c-tooltip__content",id:"tooltip-top-content"};function Ot(d,s,o,t,l,_){return c(),r("div",Mt,[Nt,e("div",Vt,[B(d.$slots,"default")])])}const Pt=T(Lt,[["render",Ot]]),jt={props:{editid:{type:[Number,Array,String,Object],required:!0}},setup(d,{emit:s}){const o=g(null);z(o,_=>t());function t(){s("closeModal")}function l(){s("confirmClear",d.editid)}return{clickOutsidetargetModal:o,close:t,confirmClear:l}}},Ft={class:"pf-c-backdrop"},At={class:"pf-l-bullseye"},qt={class:"pf-c-modal-box pf-m-sm pf-m-warning",role:"dialog",ref:"clickOutsidetargetModal"},Et=e("i",{class:"fas fa-times","aria-hidden":"true"},null,-1),Rt=[Et],It={class:"pf-c-modal-box__header"},Bt={class:"pf-c-modal-box__title",id:"modal-title-modal-basic-example-modal"},zt=e("div",{class:"pf-c-modal-box__body",id:"modal-description"},[e("p",null,"Are you absolutely sure you want to clear all logs device? You will not be able to retrieve cleared logs after this operation.")],-1),Kt={class:"pf-c-modal-box__footer"};function Ht(d,s,o,t,l,_){return c(),r("div",Ft,[e("div",At,[e("div",qt,[e("button",{class:"pf-c-button pf-m-plain",type:"button","aria-label":"Close",onClick:s[0]||(s[0]=(...n)=>t.close&&t.close(...n))},Rt),e("header",It,[e("h1",Bt," Clear device logs for "+m(o.editid)+"? ",1)]),zt,e("footer",Kt,[e("button",{class:"pf-c-button pf-m-primary pf-m-small",type:"button",onClick:s[1]||(s[1]=n=>t.confirmClear())}," Confirm "),e("button",{class:"pf-c-button pf-m-link",type:"button",onClick:s[2]||(s[2]=n=>t.close())}," Cancel ")])],512)])])}const Wt=T(jt,[["render",Ht]]),Ut={props:{model:{type:Object,default:()=>({})}},components:{Tooltip:Pt,ModalClearAllDeviceLogs:Wt},emits:["rerenderStatusPanel"],setup(d,{emit:s}){const o=g(!0),t=g(!1),l=g(!1),_=g(!1),n=N({}),a=N({}),i=g(!0);E();const k=M("create-notification"),S=M("formatTime"),b=g(!1),f=N({default:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},info:{type:"default",color:"pf-u-default-color-200",notherColor:"pf-m-cyan",icon:"fas fa-info-circle"},warn:{type:"warning",color:"pf-u-warning-color-200",notherColor:"pf-m-orange",icon:"fas fa-exclamation-triangle"},error:{type:"danger",color:"pf-u-danger-color-200",notherColor:"pf-m-red",icon:"fas fa-exclamation-circle"}});j(()=>{L(),h()});function h(){q.get("/api/activitylogs/device-stats/"+d.model.id).then(C=>{Object.assign(a,C.data),i.value=!1}).catch(C=>{k({type:"danger",title:"Error",message:C.response.data.message})})}function L(){q.get("/api/activitylogs/last5/"+d.model.id).then(C=>{Object.assign(n,C.data),i.value=!1}).catch(C=>{k({type:"danger",title:"Error",message:C.response.data.message})})}function w(){o.value=!o.value}function F(){b.value=!0}function A(C){q.get("/api/activitylogs/clear-logs/"+d.model.id).then(ls=>{k({type:"success",title:"Success",message:"Logs cleared successfully."}),b.value=!1,L(),h(),s("rerenderStatusPanel")})}return{allConfigsTooptip:_,badConfigsTooptip:l,clearLogs:A,clearAllLogsModal:F,formatTime:S,goodConfigsTooptip:t,isHiddenNotifications:o,logLookup:f,notificationResults:n,notificationStats:a,showClearModal:b,toggleNotifications:w}}},Gt={class:"pf-c-card"},Jt=e("div",{class:"pf-c-card__header"},[e("h2",{class:"pf-c-title pf-m-xl"},"Config Status")],-1),Qt={class:"pf-c-card__body"},Yt={class:"pf-l-grid pf-m-all-6-col-on-sm pf-m-all-3-col-on-lg pf-m-gutter"},Xt={class:"pf-l-grid__item"},Zt={class:"pf-l-flex pf-m-space-items-sm"},eo=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1),to={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},oo=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Good Configs")],-1),so={class:"pf-l-grid__item"},io={class:"pf-l-flex pf-m-space-items-sm"},no=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fa fa-exclamation-triangle pf-u-warning-color-100","aria-hidden":"true"})],-1),ao={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},co=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Unknown Configs")],-1),lo={class:"pf-l-grid__item"},ro={class:"pf-l-flex pf-m-space-items-sm"},_o=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-exclamation-circle pf-u-danger-color-100","aria-hidden":"true"})],-1),fo={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},po={class:"pf-l-flex__item"},mo=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Failed Configs")],-1),uo={class:"pf-l-grid__item"},vo={class:"pf-l-flex pf-m-space-items-sm"},go=e("div",{class:"pf-l-flex__item"},[e("i",{class:"fas fa-check-circle pf-u-success-color-100","aria-hidden":"true"})],-1),ho={class:"pf-l-flex pf-m-column pf-m-space-items-none pf-m-flex-1"},wo={key:0,class:"pf-l-flex__item"},bo=e("div",{class:"pf-l-flex__item"},[e("span",{class:"pf-u-color-400"},"Last Download")],-1),xo=e("hr",{class:"pf-c-divider"},null,-1),yo={class:"pf-c-notification-drawer"},Do={class:"pf-c-notification-drawer__body"},ko={class:"pf-c-notification-drawer__group pf-m-expanded"},Co=["disabled"],So={class:"pf-c-notification-drawer__group-toggle-title"},$o={class:"pf-l-flex"},To={class:"pf-c-notification-drawer__group-toggle-title"},Lo={class:"pf-l-flex pf-m-space-items-sm"},Mo={class:"pf-l-flex__item pf-m-spacer-md"},No={key:0},Vo={key:0},Oo={class:"pf-c-label__content"},Po={class:"pf-c-label__icon"},jo={key:0,class:"pf-c-notification-drawer__group-toggle-icon",alt:"view recent",title:"view recent"},Fo=e("i",{class:"fas fa-angle-right","aria-hidden":"true"},null,-1),Ao=[Fo],qo={key:0,class:"pf-c-notification-drawer__list"},Eo={class:"pf-c-notification-drawer__list-item-header"},Ro=e("span",{class:"pf-c-notification-drawer__list-item-header-icon"},[e("i",{class:"fas fa-exclamation-circle","aria-hidden":"true"})],-1),Io=e("span",{class:"pf-screen-reader"},"Danger notification:",-1),Bo={class:"pf-c-notification-drawer__list-item-action pf-u-font-size-sm pf-u-disabled-color-100"},zo={class:"pf-c-notification-drawer__list-item-description"},Ko={class:"pf-c-notification-drawer__list-item pf-m-hoverable",tabindex:"0"},Ho={class:"pf-l-grid pf-m-gutter"},Wo=e("div",{class:"pf-l-grid__item pf-m-8-col"},null,-1),Uo={class:"pf-l-grid__item pf-m-2-col"},Go={class:"pf-l-grid__item pf-m-2-col"};function Jo(d,s,o,t,l,_){const n=u("router-link"),a=u("modal-clear-all-device-logs");return c(),r("div",Gt,[Jt,e("div",Qt,[e("div",Yt,[e("div",Xt,[e("div",Zt,[eo,e("div",to,[p(n,{class:"alink",to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:1}},onMouseover:s[0]||(s[0]=i=>t.goodConfigsTooptip=!0),onMouseleave:s[1]||(s[1]=i=>t.goodConfigsTooptip=!1)},{default:y(()=>[x(m(o.model.config_good_count),1)]),_:1},8,["to"]),oo])])]),e("div",so,[e("div",io,[no,e("div",ao,[p(n,{class:"alink",to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:2}},onMouseover:s[2]||(s[2]=i=>t.goodConfigsTooptip=!0),onMouseleave:s[3]||(s[3]=i=>t.goodConfigsTooptip=!1)},{default:y(()=>[x(m(o.model.config_unknown_count),1)]),_:1},8,["to"]),co])])]),e("div",lo,[e("div",ro,[_o,e("div",fo,[e("div",po,[p(n,{to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:0}},onMouseover:s[4]||(s[4]=i=>t.badConfigsTooptip=!0),onMouseleave:s[5]||(s[5]=i=>t.badConfigsTooptip=!1)},{default:y(()=>[x(m(o.model.config_bad_count),1)]),_:1},8,["to"])]),mo])])]),e("div",uo,[e("div",vo,[go,e("div",ho,[o.model.last_config?(c(),r("div",wo,[p(n,{to:{path:"/device/view/configs/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name,status:"all"}},append:"",onMouseover:s[6]||(s[6]=i=>t.allConfigsTooptip=!0),onMouseleave:s[7]||(s[7]=i=>t.allConfigsTooptip=!1)},{default:y(()=>[x(m(t.formatTime(o.model.last_config.created_at)),1)]),_:1},8,["to"])])):v("",!0),bo])])])])]),xo,e("div",yo,[e("div",Do,[e("section",ko,[e("button",{class:"pf-c-notification-drawer__group-toggle","aria-expanded":"true",onClick:s[8]||(s[8]=(...i)=>t.toggleNotifications&&t.toggleNotifications(...i)),disabled:!t.notificationResults},[e("div",So,[e("div",$o,[e("div",To,[e("div",Lo,[e("div",Mo,[e("span",null,[x(" Notifications "),t.notificationResults?v("",!0):(c(),r("span",No,"clear"))])]),t.notificationStats?(c(),r("div",Vo,[(c(!0),r(O,null,P(t.notificationStats,i=>(c(),r("span",{class:D(["pf-c-label",t.logLookup[i.log_name].notherColor]),key:i.total},[e("span",Oo,[e("span",Po,[e("i",{class:D(["fas fa-fw",t.logLookup[i.log_name].icon]),"aria-hidden":"true"},null,2)]),x(" "+m(i.total),1)])],2))),128))])):v("",!0)])])])]),t.notificationResults?(c(),r("span",jo,Ao)):v("",!0)],8,Co),!t.isHiddenNotifications&&!0?(c(),r("ul",qo,[(c(!0),r(O,null,P(t.notificationResults,i=>(c(),r("li",{class:D(["pf-c-notification-drawer__list-item pf-m-hoverable","pf-m-"+t.logLookup[i.log_name].type]),tabindex:"0",key:i.id},[e("div",Eo,[Ro,e("h2",{class:D(["pf-c-notification-drawer__list-item-header-title",t.logLookup[i.log_name].color])},[Io,x(" "+m(i.event_type.charAt(0).toUpperCase()+i.event_type.slice(1)),1)],2)]),e("div",Bo,m(t.formatTime(i.created_at)),1),e("div",zo,m(i.description),1)],2))),128)),e("li",Ko,[e("div",Ho,[Wo,e("div",Uo,[p(n,{type:"button",to:{path:"/device/view/eventlog/"+o.model.id,query:{id:o.model.id,devicename:o.model.device_name}},class:"pf-c-button pf-m-secondary pf-m-small"},{default:y(()=>[x(" View All ")]),_:1},8,["to"])]),e("div",Go,[e("button",{onClick:s[9]||(s[9]=i=>t.clearAllLogsModal()),class:"pf-c-button pf-m-secondary pf-m-danger pf-m-small"}," Clear All ")])])])])):v("",!0)])])]),t.showClearModal?(c(),$(a,{key:0,editid:o.model.id,onCloseModal:s[10]||(s[10]=i=>t.showClearModal=!1),onConfirmClear:s[11]||(s[11]=i=>t.clearLogs(i))},null,8,["editid"])):v("",!0)])}const Qo=T(Ut,[["render",Jo]]),Yo={components:{PageHeader:G,DevicesBreadcrumbs:H,DeviceViewDeviceDetails:mt,DeviceViewStatusPanel:Qo,DeviceViewLatestDownloads:Tt,DeviceViewActionsMenu:Ne,LoadingSpinner:U,SideDrawer:J,DevicesForm:W},setup(){const d=g("Device View"),s=g("Device details dashboard"),o=E(),t=M("create-notification"),l=N({editid:o.params.id,pagename:"Devices",pagedesc:"All devices",pagenamesingle:"Device",modelName:"devices",openDrawerState:!1,drawerOuterWidth:"pf-m-width-75-on-xl pf-m-width-100 ",showDeleteModal:!1,sideDrawerComponentKey:1,pageOptionsState:{page:1,per_page:10},modelObject:{device_name:"",device_ip:"",device_vendor:"",device_model:"",device_category_id:"",device_tags:"",device_username:"",device_password:"",device_template:"",device_main_prompt:""}}),{errors:_,model:n,getModel:a,isLoading:i}=Q(l.modelName,l.modelObject),{isLoading:k,openDrawer:S,closeDrawerState:b}=Y(l,l.modelName,l.modelObject),f=g(1);j(()=>{a(l.editid)});function h(A){t({type:"success",message:A,duration:3}),a(l.editid),l.openDrawerState=!1}function L(){a(l.editid)}function w(){b()}function F(){f.value++}return{closeDrawer:w,closeDrawerState:b,downloadFinished:L,errors:_,formLoading:k,formSubmittedDeviceView:h,isLoading:i,model:n,openDrawer:S,pagedesc:s,pagename:d,viewstate:l,statusPanelComponentKey:f,rerenderStatusPanel:F}}},Xo={class:"pf-c-page__main",tabindex:"-1"},Zo=e("div",{class:"pf-c-divider",role:"separator"},null,-1),es={class:"pf-c-page__main-section pf-m-no-padding"},ts={class:"pf-c-drawer__main"},os={class:"pf-c-drawer__content pf-m-no-background"},ss={class:"pf-c-drawer__body pf-m-padding"},is={key:0,class:"pf-l-grid pf-m-gutter"},ns={class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md"},as={class:"pf-l-grid__item pf-m-12-col pf-m-6-col-on-md"};function cs(d,s,o,t,l,_){const n=u("devices-breadcrumbs"),a=u("page-header"),i=u("loading-spinner"),k=u("device-view-device-details"),S=u("device-view-status-panel"),b=u("device-view-latest-downloads"),f=u("device-view-actions-menu"),h=u("devices-form"),L=u("side-drawer");return c(),r("main",Xo,[p(a,{pagename:t.pagename},{breadcrumbs:y(()=>[p(n,{devicename:t.model.device_name,deviceId:t.model.id},null,8,["devicename","deviceId"])]),_:1},8,["pagename"]),Zo,e("section",es,[e("div",{class:D(["pf-c-drawer",{"pf-m-expanded":t.viewstate.openDrawerState}])},[e("div",ts,[e("div",os,[e("div",ss,[p(i,{showSpinner:t.isLoading},null,8,["showSpinner"]),t.isLoading?v("",!0):(c(),r("div",is,[e("div",ns,[p(k,{model:t.model,onOpenDrawer:s[0]||(s[0]=w=>t.openDrawer(w))},null,8,["model"])]),e("div",as,[(c(),$(S,{model:t.model,key:t.statusPanelComponentKey,onRerenderStatusPanel:t.rerenderStatusPanel},null,8,["model","onRerenderStatusPanel"])),p(b,{model:t.model},null,8,["model"])]),p(f,{class:"pf-l-grid__item pf-m-12-col pf-m-3-col-on-md",model:t.model,onOpenDrawer:s[1]||(s[1]=w=>t.openDrawer(w)),onDownloadFinished:s[2]||(s[2]=w=>t.downloadFinished())},null,8,["model"])]))])]),(c(),$(L,{pagename:t.viewstate.pagenamesingle,drawerState:t.viewstate.openDrawerState,outerWidth:t.viewstate.drawerOuterWidth,editid:t.viewstate.editid,isClone:t.viewstate.isClone,onCloseDrawer:s[5]||(s[5]=w=>t.closeDrawer()),key:t.viewstate.sideDrawerComponentKey},{form:y(()=>[(c(),$(h,{viewstate:t.viewstate,onCloseDrawer:s[3]||(s[3]=w=>t.closeDrawer()),onFormsubmitted:s[4]||(s[4]=w=>t.formSubmittedDeviceView(w)),key:t.viewstate.sideDrawerComponentKey},null,8,["viewstate"]))]),_:1},8,["pagename","drawerState","outerWidth","editid","isClone"]))])],2)])])}const xs=T(Yo,[["render",cs]]);export{xs as default};
